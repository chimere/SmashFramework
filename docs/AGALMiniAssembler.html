<!DOCTYPE html>  <html> <head>   <title>AGALMiniAssembler.as</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">        <div id="jump_to">         Jump To &hellip;         <div id="jump_wrapper">           <div id="jump_page">                   <b> 1. First Steps </b>                          <a class="source" href="PBEDemos.html">       PBEDemos.as      </a>                          <a class="source" href="SimplestRendererScene.html">       SimplestRendererScene.as      </a>                          <a class="source" href="SimplestSpriteRenderer.html">       SimplestSpriteRenderer.as      </a>                          <a class="source" href="BindingDemoScene.html">       BindingDemoScene.as      </a>                          <a class="source" href="SimplestSpatialComponent.html">       SimplestSpatialComponent.as      </a>                          <a class="source" href="MouseFollowerScene.html">       MouseFollowerScene.as      </a>                          <a class="source" href="SimplestMouseFollowComponent.html">       SimplestMouseFollowComponent.as      </a>                          <a class="source" href="CirclePickupScene.html">       CirclePickupScene.as      </a>                          <a class="source" href="GemManager.html">       GemManager.as      </a>                          <b> 2. Building Gameplay </b>                          <a class="source" href="CirclePickupWithTimeManagerScene.html">       CirclePickupWithTimeManagerScene.as      </a>                          <a class="source" href="OneButtonDemoScene.html">       OneButtonDemoScene.as      </a>                          <a class="source" href="OneButtonWithTweenDemoScene.html">       OneButtonWithTweenDemoScene.as      </a>                          <a class="source" href="TwoButtonDemoScene.html">       TwoButtonDemoScene.as      </a>                          <a class="source" href="CarDemoScene.html">       CarDemoScene.as      </a>                          <a class="source" href="FSMDemoScene.html">       FSMDemoScene.as      </a>                               </div>         </div>       </div>      <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs" colspan="2">             <h1>               AGALMiniAssembler.as             </h1>           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>               <p>================================================================================</p>

<p>ADOBE SYSTEMS INCORPORATED
Copyright 2010 Adobe Systems Incorporated
All Rights Reserved.</p>

<p>NOTICE: Adobe permits you to use, modify, and distribute this file
in accordance with the terms of the license agreement accompanying it.</p>

<p>================================================================================</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="kd">package</span> <span class="nx">demos</span><span class="p">.</span><span class="nx">molehill</span>
<span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-2">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-2">&#182;</a>               </div>               <p>===========================================================================</p>

<h2>Imports</h2>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="kd">import</span> <span class="nx">flash</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="o">*;</span>
    <span class="kd">import</span> <span class="nx">flash</span><span class="p">.</span><span class="nx">display3D</span><span class="p">.</span><span class="o">*;</span>
    </pre></div>             </td>           </tr>                               <tr id="section-3">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-3">&#182;</a>               </div>               <p>===========================================================================</p>

<h2>Class</h2>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="kd">public</span> <span class="kd">class</span> <span class="nx">AGALMiniAssembler</span>
    <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-4">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-4">&#182;</a>               </div>               <p>======================================================================</p>

<h2>Properties</h2>

<p>AGAL bytes and error buffer </p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="kd">private</span> <span class="k">var</span> <span class="nx">_agalcode</span><span class="o">:</span><span class="nb">ByteArray</span>							<span class="o">=</span> <span class="k">new</span> <span class="nb">ByteArray</span><span class="p">();</span>
        <span class="kd">private</span> <span class="k">var</span> <span class="nx">_error</span><span class="o">:</span><span class="nb">String</span>								<span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">;</span>
        
        <span class="kd">private</span> <span class="k">var</span> <span class="nx">debugEnabled</span><span class="o">:</span><span class="nb">Boolean</span>						<span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
        
        <span class="kd">private</span> <span class="kd">static</span> <span class="k">var</span> <span class="nx">initialized</span><span class="o">:</span><span class="nb">Boolean</span>					<span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
        </pre></div>             </td>           </tr>                               <tr id="section-5">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-5">&#182;</a>               </div>               <p>======================================================================</p>

<h2>Getters</h2>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="kd">public</span> <span class="kd">function</span> <span class="kd">get</span> <span class="nx">error</span><span class="p">()</span><span class="o">:</span><span class="nb">String</span>						<span class="p">{</span> <span class="k">return</span> <span class="nx">_error</span><span class="o">;</span> <span class="p">}</span>
        <span class="kd">public</span> <span class="kd">function</span> <span class="kd">get</span> <span class="nx">agalcode</span><span class="p">()</span><span class="o">:</span><span class="nb">ByteArray</span>				<span class="p">{</span> <span class="k">return</span> <span class="nx">_agalcode</span><span class="o">;</span> <span class="p">}</span>
        </pre></div>             </td>           </tr>                               <tr id="section-6">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-6">&#182;</a>               </div>               <p>======================================================================</p>

<h2>Constructor</h2>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="kd">public</span> <span class="kd">function</span> <span class="nx">AGALMiniAssembler</span><span class="p">(</span> <span class="nx">debugging</span><span class="o">:</span><span class="nb">Boolean</span> <span class="o">=</span> <span class="kc">false</span> <span class="p">)</span><span class="o">:</span><span class="nx">void</span>
        <span class="p">{</span>
            <span class="nx">debugEnabled</span> <span class="o">=</span> <span class="nx">debugging</span><span class="o">;</span>
            <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">initialized</span> <span class="p">)</span>
                <span class="nx">init</span><span class="p">();</span>
        <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-7">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-7">&#182;</a>               </div>               <p>======================================================================</p>

<h2>Methods</h2>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="kd">public</span> <span class="kd">function</span> <span class="nx">assemble</span><span class="p">(</span> <span class="nx">mode</span><span class="o">:</span><span class="nb">String</span><span class="o">,</span> <span class="nx">source</span><span class="o">:</span><span class="nb">String</span><span class="o">,</span> <span class="nx">verbose</span><span class="o">:</span><span class="nb">Boolean</span> <span class="o">=</span> <span class="kc">false</span> <span class="p">)</span><span class="o">:</span><span class="nb">ByteArray</span>
        <span class="p">{</span>
            <span class="k">var</span> <span class="nx">start</span><span class="o">:</span><span class="nb">uint</span> <span class="o">=</span> <span class="nf">getTimer</span><span class="p">();</span>
            
            <span class="nx">agalcode</span><span class="p">.</span><span class="nx">length</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
            <span class="nx">_error</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">;</span>
            
            <span class="k">var</span> <span class="nx">isFrag</span><span class="o">:</span><span class="nb">Boolean</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
            
            <span class="k">if</span> <span class="p">(</span> <span class="nx">mode</span> <span class="o">==</span> <span class="nx">FRAGMENT</span> <span class="p">)</span>
                <span class="nx">isFrag</span> <span class="o">=</span> <span class="kc">true</span>
            <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">mode</span> <span class="o">!=</span> <span class="nx">VERTEX</span> <span class="p">)</span>
                <span class="nx">_error</span> <span class="o">=</span> <span class="s1">&#39;ERROR: mode needs to be &quot;&#39;</span> <span class="o">+</span> <span class="nx">FRAGMENT</span> <span class="o">+</span> <span class="s1">&#39;&quot; or &quot;&#39;</span> <span class="o">+</span> <span class="nx">VERTEX</span> <span class="o">+</span> <span class="s1">&#39;&quot; but is &quot;&#39;</span> <span class="o">+</span> <span class="nx">mode</span> <span class="o">+</span> <span class="s1">&#39;&quot;.&#39;</span><span class="o">;</span>
            
            <span class="nx">agalcode</span><span class="p">.</span><span class="nx">endian</span> <span class="o">=</span> <span class="nb">Endian</span><span class="p">.</span><span class="nx">LITTLE_ENDIAN</span><span class="o">;</span>
            <span class="nx">agalcode</span><span class="p">.</span><span class="nx">writeByte</span><span class="p">(</span> <span class="mh">0xa0</span> <span class="p">);</span>				<span class="c1">// tag version</span>
            <span class="nx">agalcode</span><span class="p">.</span><span class="nx">writeUnsignedInt</span><span class="p">(</span> <span class="mh">0x1</span> <span class="p">);</span>		<span class="c1">// AGAL version, big endian, bit pattern will be 0x01000000</span>
            <span class="nx">agalcode</span><span class="p">.</span><span class="nx">writeByte</span><span class="p">(</span> <span class="mh">0xa1</span> <span class="p">);</span>				<span class="c1">// tag program id</span>
            <span class="nx">agalcode</span><span class="p">.</span><span class="nx">writeByte</span><span class="p">(</span> <span class="nx">isFrag</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="mi">0</span> <span class="p">);</span>	<span class="c1">// vertex or fragment</span>
            
            <span class="k">var</span> <span class="nx">lines</span><span class="o">:</span><span class="nb">Array</span> <span class="o">=</span> <span class="nx">source</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span> <span class="sr">/[\f\n\r\v]+/g</span><span class="o">,</span> <span class="s2">&quot;\n&quot;</span> <span class="p">).</span><span class="nx">split</span><span class="p">(</span> <span class="s2">&quot;\n&quot;</span> <span class="p">);</span>
            <span class="k">var</span> <span class="nx">nest</span><span class="o">:</span><span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
            <span class="k">var</span> <span class="nx">nops</span><span class="o">:</span><span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
            <span class="k">var</span> <span class="nx">i</span><span class="o">:</span><span class="nb">int</span><span class="o">;</span>
            <span class="k">var</span> <span class="nx">lng</span><span class="o">:</span><span class="nb">int</span> <span class="o">=</span> <span class="nx">lines</span><span class="p">.</span><span class="nx">length</span><span class="o">;</span>
            
            <span class="k">for</span> <span class="p">(</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">lng</span> <span class="o">&amp;&amp;</span> <span class="nx">_error</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="o">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span>
            <span class="p">{</span>
                <span class="k">var</span> <span class="nx">line</span><span class="o">:</span><span class="nb">String</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">String</span><span class="p">(</span> <span class="nx">lines</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">);</span>
                </pre></div>             </td>           </tr>                               <tr id="section-8">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-8">&#182;</a>               </div>               <p>remove comments</p>             </td>             <td class="code">               <div class="highlight"><pre>                <span class="k">var</span> <span class="nx">startcomment</span><span class="o">:</span><span class="nb">int</span> <span class="o">=</span> <span class="nx">line</span><span class="p">.</span><span class="nx">search</span><span class="p">(</span> <span class="s2">&quot;//&quot;</span> <span class="p">);</span>
                <span class="k">if</span> <span class="p">(</span> <span class="nx">startcomment</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span> <span class="p">)</span>
                    <span class="nx">line</span> <span class="o">=</span> <span class="nx">line</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span> <span class="mi">0</span><span class="o">,</span> <span class="nx">startcomment</span> <span class="p">);</span>
                </pre></div>             </td>           </tr>                               <tr id="section-9">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-9">&#182;</a>               </div>               <p>grab options</p>             </td>             <td class="code">               <div class="highlight"><pre>                <span class="k">var</span> <span class="nx">optsi</span><span class="o">:</span><span class="nb">int</span> <span class="o">=</span> <span class="nx">line</span><span class="p">.</span><span class="nx">search</span><span class="p">(</span> <span class="sr">/&lt;.*&gt;/g</span> <span class="p">);</span>
                <span class="k">var</span> <span class="nx">opts</span><span class="o">:</span><span class="nb">Array</span><span class="o">;</span>
                <span class="k">if</span> <span class="p">(</span> <span class="nx">optsi</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span> <span class="p">)</span>
                <span class="p">{</span>
                    <span class="nx">opts</span> <span class="o">=</span> <span class="nx">line</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span> <span class="nx">optsi</span> <span class="p">).</span><span class="nx">match</span><span class="p">(</span> <span class="sr">/(\w+)/gi</span> <span class="p">);</span>
                    <span class="nx">line</span> <span class="o">=</span> <span class="nx">line</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span> <span class="mi">0</span><span class="o">,</span> <span class="nx">optsi</span> <span class="p">);</span>
                <span class="p">}</span>
                </pre></div>             </td>           </tr>                               <tr id="section-10">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-10">&#182;</a>               </div>               <p>find opcode</p>             </td>             <td class="code">               <div class="highlight"><pre>                <span class="k">var</span> <span class="nx">opCode</span><span class="o">:</span><span class="nb">Array</span> <span class="o">=</span> <span class="nx">line</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span> <span class="sr">/^\w{3}/ig</span> <span class="p">);</span>
                <span class="k">var</span> <span class="nx">opFound</span><span class="o">:</span><span class="nx">OpCode</span> <span class="o">=</span> <span class="nx">OPMAP</span><span class="p">[</span> <span class="nx">opCode</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">];</span>
                </pre></div>             </td>           </tr>                               <tr id="section-11">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-11">&#182;</a>               </div>               <p>if debug is enabled, output the opcodes</p>             </td>             <td class="code">               <div class="highlight"><pre>                <span class="k">if</span> <span class="p">(</span> <span class="nx">debugEnabled</span> <span class="p">)</span>
                    <span class="nf">trace</span><span class="p">(</span> <span class="nx">opFound</span> <span class="p">);</span>
                
                <span class="k">if</span> <span class="p">(</span> <span class="nx">opFound</span> <span class="o">==</span> <span class="kc">null</span> <span class="p">)</span>
                <span class="p">{</span>
                    <span class="k">if</span> <span class="p">(</span> <span class="nx">line</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;=</span> <span class="mi">3</span> <span class="p">)</span>
                        <span class="nf">trace</span><span class="p">(</span> <span class="s2">&quot;warning: bad line &quot;</span><span class="o">+</span><span class="nx">i</span><span class="o">+</span><span class="s2">&quot;: &quot;</span><span class="o">+</span><span class="nx">lines</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">);</span>
                    <span class="k">continue</span><span class="o">;</span>
                <span class="p">}</span>
                
                <span class="nx">line</span> <span class="o">=</span> <span class="nx">line</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span> <span class="nx">line</span><span class="p">.</span><span class="nx">search</span><span class="p">(</span> <span class="nx">opFound</span><span class="p">.</span><span class="nx">name</span> <span class="p">)</span> <span class="o">+</span> <span class="nx">opFound</span><span class="p">.</span><span class="nx">name</span><span class="p">.</span><span class="nx">length</span> <span class="p">);</span>
                </pre></div>             </td>           </tr>                               <tr id="section-12">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-12">&#182;</a>               </div>               <p>nesting check</p>             </td>             <td class="code">               <div class="highlight"><pre>                <span class="k">if</span> <span class="p">(</span> <span class="nx">opFound</span><span class="p">.</span><span class="nx">flags</span> <span class="o">&amp;</span> <span class="nx">OP_DEC_NEST</span> <span class="p">)</span>
                <span class="p">{</span>
                    <span class="nx">nest</span><span class="o">--;</span>
                    <span class="k">if</span> <span class="p">(</span> <span class="nx">nest</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="p">)</span>
                    <span class="p">{</span>
                        <span class="nx">_error</span> <span class="o">=</span> <span class="s2">&quot;error: conditional closes without open.&quot;</span><span class="o">;</span>
                        <span class="k">break</span><span class="o">;</span>
                    <span class="p">}</span>
                <span class="p">}</span>
                <span class="k">if</span> <span class="p">(</span> <span class="nx">opFound</span><span class="p">.</span><span class="nx">flags</span> <span class="o">&amp;</span> <span class="nx">OP_INC_NEST</span> <span class="p">)</span>
                <span class="p">{</span>
                    <span class="nx">nest</span><span class="o">++;</span>
                    <span class="k">if</span> <span class="p">(</span> <span class="nx">nest</span> <span class="o">&gt;</span> <span class="nx">MAX_NESTING</span> <span class="p">)</span>
                    <span class="p">{</span>
                        <span class="nx">_error</span> <span class="o">=</span> <span class="s2">&quot;error: nesting to deep, maximum allowed is &quot;</span><span class="o">+</span><span class="nx">MAX_NESTING</span><span class="o">+</span><span class="s2">&quot;.&quot;</span><span class="o">;</span>
                        <span class="k">break</span><span class="o">;</span>
                    <span class="p">}</span>
                <span class="p">}</span>
                <span class="k">if</span> <span class="p">(</span> <span class="p">(</span> <span class="nx">opFound</span><span class="p">.</span><span class="nx">flags</span> <span class="o">&amp;</span> <span class="nx">OP_FRAG_ONLY</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">isFrag</span> <span class="p">)</span>
                <span class="p">{</span>
                    <span class="nx">_error</span> <span class="o">=</span> <span class="s2">&quot;error: opcode is only allowed in fragment programs.&quot;</span><span class="o">;</span>
                    <span class="k">break</span><span class="o">;</span>
                <span class="p">}</span>
                <span class="k">if</span> <span class="p">(</span> <span class="nx">verbose</span> <span class="p">)</span>
                    <span class="nf">trace</span><span class="p">(</span> <span class="s2">&quot;emit opcode=&quot;</span> <span class="o">+</span> <span class="nx">opFound</span> <span class="p">);</span>
                
                <span class="nx">agalcode</span><span class="p">.</span><span class="nx">writeUnsignedInt</span><span class="p">(</span> <span class="nx">opFound</span><span class="p">.</span><span class="nx">emitCode</span> <span class="p">);</span>
                <span class="nx">nops</span><span class="o">++;</span>
                
                <span class="k">if</span> <span class="p">(</span> <span class="nx">nops</span> <span class="o">&gt;</span> <span class="nx">MAX_OPCODES</span> <span class="p">)</span>
                <span class="p">{</span>
                    <span class="nx">_error</span> <span class="o">=</span> <span class="s2">&quot;error: too many opcodes. maximum is &quot;</span><span class="o">+</span><span class="nx">MAX_OPCODES</span><span class="o">+</span><span class="s2">&quot;.&quot;</span><span class="o">;</span>
                    <span class="k">break</span><span class="o">;</span>
                <span class="p">}</span>
                </pre></div>             </td>           </tr>                               <tr id="section-13">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-13">&#182;</a>               </div>               <p>get operands, use regexp</p>             </td>             <td class="code">               <div class="highlight"><pre>                <span class="k">var</span> <span class="nx">regs</span><span class="o">:</span><span class="nb">Array</span> <span class="o">=</span> <span class="nx">line</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span> <span class="sr">/vc\[([vof][actps]?)(\d*)?(\.[xyzw](\+\d{1,3})?)?\](\.[xyzw]{1,4})?|([vof][actps]?)(\d*)?(\.[xyzw]{1,4})?/gi</span> <span class="p">);</span>
                <span class="k">if</span> <span class="p">(</span> <span class="nx">regs</span><span class="p">.</span><span class="nx">length</span> <span class="o">!=</span> <span class="nx">opFound</span><span class="p">.</span><span class="nx">numRegister</span> <span class="p">)</span>
                <span class="p">{</span>
                    <span class="nx">_error</span> <span class="o">=</span> <span class="s2">&quot;error: wrong number of operands. found &quot;</span><span class="o">+</span><span class="nx">regs</span><span class="p">.</span><span class="nx">length</span><span class="o">+</span><span class="s2">&quot; but expected &quot;</span><span class="o">+</span><span class="nx">opFound</span><span class="p">.</span><span class="nx">numRegister</span><span class="o">+</span><span class="s2">&quot;.&quot;</span><span class="o">;</span>
                    <span class="k">break</span><span class="o">;</span>
                <span class="p">}</span>
                
                <span class="k">var</span> <span class="nx">badreg</span><span class="o">:</span><span class="nb">Boolean</span>	<span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
                <span class="k">var</span> <span class="nx">pad</span><span class="o">:</span><span class="nb">uint</span>		<span class="o">=</span> <span class="mi">64</span> <span class="o">+</span> <span class="mi">64</span> <span class="o">+</span> <span class="mi">32</span><span class="o">;</span>
                <span class="k">var</span> <span class="nx">regLength</span><span class="o">:</span><span class="nb">uint</span>	<span class="o">=</span> <span class="nx">regs</span><span class="p">.</span><span class="nx">length</span><span class="o">;</span>
                
                <span class="k">for</span> <span class="p">(</span> <span class="k">var</span> <span class="nx">j</span><span class="o">:</span><span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">regLength</span><span class="o">;</span> <span class="nx">j</span><span class="o">++</span> <span class="p">)</span>
                <span class="p">{</span>
                    <span class="k">var</span> <span class="nx">isRelative</span><span class="o">:</span><span class="nb">Boolean</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
                    <span class="k">var</span> <span class="nx">relreg</span><span class="o">:</span><span class="nb">Array</span> <span class="o">=</span> <span class="nx">regs</span><span class="p">[</span> <span class="nx">j</span> <span class="p">].</span><span class="nx">match</span><span class="p">(</span> <span class="sr">/\[.*\]/ig</span> <span class="p">);</span>
                    <span class="k">if</span> <span class="p">(</span> <span class="nx">relreg</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">)</span>
                    <span class="p">{</span>
                        <span class="nx">regs</span><span class="p">[</span> <span class="nx">j</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">regs</span><span class="p">[</span> <span class="nx">j</span> <span class="p">].</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">relreg</span><span class="p">[</span> <span class="mi">0</span> <span class="p">]</span><span class="o">,</span> <span class="s2">&quot;0&quot;</span> <span class="p">);</span>
                        
                        <span class="k">if</span> <span class="p">(</span> <span class="nx">verbose</span> <span class="p">)</span>
                            <span class="nf">trace</span><span class="p">(</span> <span class="s2">&quot;IS REL&quot;</span> <span class="p">);</span>
                        <span class="nx">isRelative</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
                    <span class="p">}</span>
                    
                    <span class="k">var</span> <span class="nx">res</span><span class="o">:</span><span class="nb">Array</span> <span class="o">=</span> <span class="nx">regs</span><span class="p">[</span><span class="nx">j</span><span class="p">].</span><span class="nx">match</span><span class="p">(</span> <span class="sr">/^\b[A-Za-z]{1,2}/ig</span> <span class="p">);</span>
                    <span class="k">var</span> <span class="nx">regFound</span><span class="o">:</span><span class="nx">Register</span> <span class="o">=</span> <span class="nx">REGMAP</span><span class="p">[</span> <span class="nx">res</span><span class="p">[</span> <span class="mi">0</span> <span class="p">]</span> <span class="p">];</span>
                    </pre></div>             </td>           </tr>                               <tr id="section-14">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-14">&#182;</a>               </div>               <p>if debug is enabled, output the registers</p>             </td>             <td class="code">               <div class="highlight"><pre>                    <span class="k">if</span> <span class="p">(</span> <span class="nx">debugEnabled</span> <span class="p">)</span>
                        <span class="nf">trace</span><span class="p">(</span> <span class="nx">regFound</span> <span class="p">);</span>
                    
                    <span class="k">if</span> <span class="p">(</span> <span class="nx">regFound</span> <span class="o">==</span> <span class="kc">null</span> <span class="p">)</span>
                    <span class="p">{</span>
                        <span class="nx">_error</span> <span class="o">=</span> <span class="s2">&quot;error: could not parse operand &quot;</span><span class="o">+</span><span class="nx">j</span><span class="o">+</span><span class="s2">&quot; (&quot;</span><span class="o">+</span><span class="nx">regs</span><span class="p">[</span><span class="nx">j</span><span class="p">]</span><span class="o">+</span><span class="s2">&quot;).&quot;</span><span class="o">;</span>
                        <span class="nx">badreg</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
                        <span class="k">break</span><span class="o">;</span>
                    <span class="p">}</span>
                    
                    <span class="k">if</span> <span class="p">(</span> <span class="nx">isFrag</span> <span class="p">)</span>
                    <span class="p">{</span>
                        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="p">(</span> <span class="nx">regFound</span><span class="p">.</span><span class="nx">flags</span> <span class="o">&amp;</span> <span class="nx">REG_FRAG</span> <span class="p">)</span> <span class="p">)</span>
                        <span class="p">{</span>
                            <span class="nx">_error</span> <span class="o">=</span> <span class="s2">&quot;error: register operand &quot;</span><span class="o">+</span><span class="nx">j</span><span class="o">+</span><span class="s2">&quot; (&quot;</span><span class="o">+</span><span class="nx">regs</span><span class="p">[</span><span class="nx">j</span><span class="p">]</span><span class="o">+</span><span class="s2">&quot;) only allowed in vertex programs.&quot;</span><span class="o">;</span>
                            <span class="nx">badreg</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
                            <span class="k">break</span><span class="o">;</span>
                        <span class="p">}</span>
                        <span class="k">if</span> <span class="p">(</span> <span class="nx">isRelative</span> <span class="p">)</span>
                        <span class="p">{</span>
                            <span class="nx">_error</span> <span class="o">=</span> <span class="s2">&quot;error: register operand &quot;</span><span class="o">+</span><span class="nx">j</span><span class="o">+</span><span class="s2">&quot; (&quot;</span><span class="o">+</span><span class="nx">regs</span><span class="p">[</span><span class="nx">j</span><span class="p">]</span><span class="o">+</span><span class="s2">&quot;) relative adressing not allowed in fragment programs.&quot;</span><span class="o">;</span>
                            <span class="nx">badreg</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
                            <span class="k">break</span><span class="o">;</span>
                        <span class="p">}</span>			
                    <span class="p">}</span>
                    <span class="k">else</span>
                    <span class="p">{</span>
                        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="p">(</span> <span class="nx">regFound</span><span class="p">.</span><span class="nx">flags</span> <span class="o">&amp;</span> <span class="nx">REG_VERT</span> <span class="p">)</span> <span class="p">)</span>
                        <span class="p">{</span>
                            <span class="nx">_error</span> <span class="o">=</span> <span class="s2">&quot;error: register operand &quot;</span><span class="o">+</span><span class="nx">j</span><span class="o">+</span><span class="s2">&quot; (&quot;</span><span class="o">+</span><span class="nx">regs</span><span class="p">[</span><span class="nx">j</span><span class="p">]</span><span class="o">+</span><span class="s2">&quot;) only allowed in fragment programs.&quot;</span><span class="o">;</span>
                            <span class="nx">badreg</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
                            <span class="k">break</span><span class="o">;</span>
                        <span class="p">}</span>
                    <span class="p">}</span>
                    
                    <span class="nx">regs</span><span class="p">[</span><span class="nx">j</span><span class="p">]</span> <span class="o">=</span> <span class="nx">regs</span><span class="p">[</span><span class="nx">j</span><span class="p">].</span><span class="nx">slice</span><span class="p">(</span> <span class="nx">regs</span><span class="p">[</span><span class="nx">j</span><span class="p">].</span><span class="nx">search</span><span class="p">(</span> <span class="nx">regFound</span><span class="p">.</span><span class="nx">name</span> <span class="p">)</span> <span class="o">+</span> <span class="nx">regFound</span><span class="p">.</span><span class="nx">name</span><span class="p">.</span><span class="nx">length</span> <span class="p">);</span></pre></div>             </td>           </tr>                               <tr id="section-15">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-15">&#182;</a>               </div>               <p>trace( "REGNUM: " +regs[j] );</p>             </td>             <td class="code">               <div class="highlight"><pre>                    <span class="k">var</span> <span class="nx">idxmatch</span><span class="o">:</span><span class="nb">Array</span> <span class="o">=</span> <span class="nx">isRelative</span> <span class="o">?</span> <span class="nx">relreg</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">match</span><span class="p">(</span> <span class="sr">/\d+/</span> <span class="p">)</span> <span class="o">:</span> <span class="nx">regs</span><span class="p">[</span><span class="nx">j</span><span class="p">].</span><span class="nx">match</span><span class="p">(</span> <span class="sr">/\d+/</span> <span class="p">);</span>
                    <span class="k">var</span> <span class="nx">regidx</span><span class="o">:</span><span class="nb">uint</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
                    
                    <span class="k">if</span> <span class="p">(</span> <span class="nx">idxmatch</span> <span class="p">)</span>
                        <span class="nx">regidx</span> <span class="o">=</span> <span class="nb">uint</span><span class="p">(</span> <span class="nx">idxmatch</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">);</span>
                    
                    <span class="k">if</span> <span class="p">(</span> <span class="nx">regFound</span><span class="p">.</span><span class="nx">range</span> <span class="o">&lt;</span> <span class="nx">regidx</span> <span class="p">)</span>
                    <span class="p">{</span>
                        <span class="nx">_error</span> <span class="o">=</span> <span class="s2">&quot;error: register operand &quot;</span><span class="o">+</span><span class="nx">j</span><span class="o">+</span><span class="s2">&quot; (&quot;</span><span class="o">+</span><span class="nx">regs</span><span class="p">[</span><span class="nx">j</span><span class="p">]</span><span class="o">+</span><span class="s2">&quot;) index exceeds limit of &quot;</span><span class="o">+</span><span class="p">(</span><span class="nx">regFound</span><span class="p">.</span><span class="nx">range</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;.&quot;</span><span class="o">;</span>
                        <span class="nx">badreg</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
                        <span class="k">break</span><span class="o">;</span>
                    <span class="p">}</span>
                    
                    <span class="k">var</span> <span class="nx">regmask</span><span class="o">:</span><span class="nb">uint</span>		<span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
                    <span class="k">var</span> <span class="nx">maskmatch</span><span class="o">:</span><span class="nb">Array</span>		<span class="o">=</span> <span class="nx">regs</span><span class="p">[</span><span class="nx">j</span><span class="p">].</span><span class="nx">match</span><span class="p">(</span> <span class="sr">/(\.[xyzw]{1,4})/</span> <span class="p">);</span>
                    <span class="k">var</span> <span class="nx">isDest</span><span class="o">:</span><span class="nb">Boolean</span>		<span class="o">=</span> <span class="p">(</span> <span class="nx">j</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="p">(</span> <span class="nx">opFound</span><span class="p">.</span><span class="nx">flags</span> <span class="o">&amp;</span> <span class="nx">OP_NO_DEST</span> <span class="p">)</span> <span class="p">);</span>
                    <span class="k">var</span> <span class="nx">isSampler</span><span class="o">:</span><span class="nb">Boolean</span>	<span class="o">=</span> <span class="p">(</span> <span class="nx">j</span> <span class="o">==</span> <span class="mi">2</span> <span class="o">&amp;&amp;</span> <span class="p">(</span> <span class="nx">opFound</span><span class="p">.</span><span class="nx">flags</span> <span class="o">&amp;</span> <span class="nx">OP_SPECIAL_TEX</span> <span class="p">)</span> <span class="p">);</span>
                    <span class="k">var</span> <span class="nx">reltype</span><span class="o">:</span><span class="nb">uint</span>		<span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
                    <span class="k">var</span> <span class="nx">relsel</span><span class="o">:</span><span class="nb">uint</span>			<span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
                    <span class="k">var</span> <span class="nx">reloffset</span><span class="o">:</span><span class="nb">int</span>		<span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
                    
                    <span class="k">if</span> <span class="p">(</span> <span class="nx">isDest</span> <span class="o">&amp;&amp;</span> <span class="nx">isRelative</span> <span class="p">)</span>
                    <span class="p">{</span>
                        <span class="nx">_error</span> <span class="o">=</span> <span class="s2">&quot;error: relative can not be destination&quot;</span><span class="o">;</span>	
                        <span class="nx">badreg</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span> 
                        <span class="k">break</span><span class="o">;</span>								
                    <span class="p">}</span>
                    
                    <span class="k">if</span> <span class="p">(</span> <span class="nx">maskmatch</span> <span class="p">)</span>
                    <span class="p">{</span>
                        <span class="nx">regmask</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
                        <span class="k">var</span> <span class="nx">cv</span><span class="o">:</span><span class="nb">uint</span><span class="o">;</span> 
                        <span class="k">var</span> <span class="nx">maskLength</span><span class="o">:</span><span class="nb">uint</span> <span class="o">=</span> <span class="nx">maskmatch</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">length</span><span class="o">;</span>
                        <span class="k">for</span> <span class="p">(</span> <span class="k">var</span> <span class="nx">k</span><span class="o">:</span><span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span> <span class="nx">k</span> <span class="o">&lt;</span> <span class="nx">maskLength</span><span class="o">;</span> <span class="nx">k</span><span class="o">++</span> <span class="p">)</span>
                        <span class="p">{</span>
                            <span class="nx">cv</span> <span class="o">=</span> <span class="nx">maskmatch</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">charCodeAt</span><span class="p">(</span><span class="nx">k</span><span class="p">)</span> <span class="o">-</span> <span class="s2">&quot;x&quot;</span><span class="p">.</span><span class="nx">charCodeAt</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
                            <span class="k">if</span> <span class="p">(</span> <span class="nx">cv</span> <span class="o">&gt;</span> <span class="mi">2</span> <span class="p">)</span>
                                <span class="nx">cv</span> <span class="o">=</span> <span class="mi">3</span><span class="o">;</span>
                            <span class="k">if</span> <span class="p">(</span> <span class="nx">isDest</span> <span class="p">)</span>
                                <span class="nx">regmask</span> <span class="o">|=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="nx">cv</span><span class="o">;</span>
                            <span class="k">else</span>
                                <span class="nx">regmask</span> <span class="o">|=</span> <span class="nx">cv</span> <span class="o">&lt;&lt;</span> <span class="p">(</span> <span class="p">(</span> <span class="nx">k</span> <span class="o">-</span> <span class="mi">1</span> <span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span> <span class="p">);</span>
                        <span class="p">}</span>
                        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">isDest</span> <span class="p">)</span>
                            <span class="k">for</span> <span class="p">(</span> <span class="o">;</span> <span class="nx">k</span> <span class="o">&lt;=</span> <span class="mi">4</span><span class="o">;</span> <span class="nx">k</span><span class="o">++</span> <span class="p">)</span>
                                <span class="nx">regmask</span> <span class="o">|=</span> <span class="nx">cv</span> <span class="o">&lt;&lt;</span> <span class="p">(</span> <span class="p">(</span> <span class="nx">k</span> <span class="o">-</span> <span class="mi">1</span> <span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span> <span class="p">)</span> <span class="c1">// repeat last								</span>
                    <span class="p">}</span>
                    <span class="k">else</span>
                    <span class="p">{</span>
                        <span class="nx">regmask</span> <span class="o">=</span> <span class="nx">isDest</span> <span class="o">?</span> <span class="mh">0xf</span> <span class="o">:</span> <span class="mh">0xe4</span><span class="o">;</span> <span class="c1">// id swizzle or mask						</span>
                    <span class="p">}</span>
                    
                    <span class="k">if</span> <span class="p">(</span> <span class="nx">isRelative</span> <span class="p">)</span>
                    <span class="p">{</span>
                        <span class="k">var</span> <span class="nx">relname</span><span class="o">:</span><span class="nb">Array</span> <span class="o">=</span> <span class="nx">relreg</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">match</span><span class="p">(</span> <span class="sr">/[A-Za-z]{1,2}/ig</span> <span class="p">);</span>						
                        <span class="k">var</span> <span class="nx">regFoundRel</span><span class="o">:</span><span class="nx">Register</span> <span class="o">=</span> <span class="nx">REGMAP</span><span class="p">[</span> <span class="nx">relname</span><span class="p">[</span><span class="mi">0</span><span class="p">]];</span>						
                        <span class="k">if</span> <span class="p">(</span> <span class="nx">regFoundRel</span> <span class="o">==</span> <span class="kc">null</span> <span class="p">)</span>
                        <span class="p">{</span> 
                            <span class="nx">_error</span> <span class="o">=</span> <span class="s2">&quot;error: bad index register&quot;</span><span class="o">;</span> 
                            <span class="nx">badreg</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span> 
                            <span class="k">break</span><span class="o">;</span>
                        <span class="p">}</span>
                        <span class="nx">reltype</span> <span class="o">=</span> <span class="nx">regFoundRel</span><span class="p">.</span><span class="nx">emitCode</span><span class="o">;</span>
                        <span class="k">var</span> <span class="nx">selmatch</span><span class="o">:</span><span class="nb">Array</span> <span class="o">=</span> <span class="nx">relreg</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">match</span><span class="p">(</span> <span class="sr">/(\.[xyzw]{1,1})/</span> <span class="p">);</span>						
                        <span class="k">if</span> <span class="p">(</span> <span class="nx">selmatch</span><span class="p">.</span><span class="nx">length</span><span class="o">==</span><span class="mi">0</span> <span class="p">)</span>
                        <span class="p">{</span>
                            <span class="nx">_error</span> <span class="o">=</span> <span class="s2">&quot;error: bad index register select&quot;</span><span class="o">;</span> 
                            <span class="nx">badreg</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span> 
                            <span class="k">break</span><span class="o">;</span>						
                        <span class="p">}</span>
                        <span class="nx">relsel</span> <span class="o">=</span> <span class="nx">selmatch</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">charCodeAt</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">-</span> <span class="s2">&quot;x&quot;</span><span class="p">.</span><span class="nx">charCodeAt</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
                        <span class="k">if</span> <span class="p">(</span> <span class="nx">relsel</span> <span class="o">&gt;</span> <span class="mi">2</span> <span class="p">)</span>
                            <span class="nx">relsel</span> <span class="o">=</span> <span class="mi">3</span><span class="o">;</span> 
                        <span class="k">var</span> <span class="nx">relofs</span><span class="o">:</span><span class="nb">Array</span> <span class="o">=</span> <span class="nx">relreg</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">match</span><span class="p">(</span> <span class="sr">/\+\d{1,3}/ig</span> <span class="p">);</span>
                        <span class="k">if</span> <span class="p">(</span> <span class="nx">relofs</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">)</span> 
                            <span class="nx">reloffset</span> <span class="o">=</span> <span class="nx">relofs</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span> 						
                        <span class="k">if</span> <span class="p">(</span> <span class="nx">reloffset</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">||</span> <span class="nx">reloffset</span> <span class="o">&gt;</span> <span class="mi">255</span> <span class="p">)</span>
                        <span class="p">{</span>
                            <span class="nx">_error</span> <span class="o">=</span> <span class="s2">&quot;error: index offset &quot;</span><span class="o">+</span><span class="nx">reloffset</span><span class="o">+</span><span class="s2">&quot; out of bounds. [0..255]&quot;</span><span class="o">;</span> 
                            <span class="nx">badreg</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span> 
                            <span class="k">break</span><span class="o">;</span>							
                        <span class="p">}</span>
                        <span class="k">if</span> <span class="p">(</span> <span class="nx">verbose</span> <span class="p">)</span>
                            <span class="nf">trace</span><span class="p">(</span> <span class="s2">&quot;RELATIVE: type=&quot;</span><span class="o">+</span><span class="nx">reltype</span><span class="o">+</span><span class="s2">&quot;==&quot;</span><span class="o">+</span><span class="nx">relname</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">+</span><span class="s2">&quot; sel=&quot;</span><span class="o">+</span><span class="nx">relsel</span><span class="o">+</span><span class="s2">&quot;==&quot;</span><span class="o">+</span><span class="nx">selmatch</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">+</span><span class="s2">&quot; idx=&quot;</span><span class="o">+</span><span class="nx">regidx</span><span class="o">+</span><span class="s2">&quot; offset=&quot;</span><span class="o">+</span><span class="nx">reloffset</span> <span class="p">);</span> 
                    <span class="p">}</span>
                    
                    <span class="k">if</span> <span class="p">(</span> <span class="nx">verbose</span> <span class="p">)</span>
                        <span class="nf">trace</span><span class="p">(</span> <span class="s2">&quot;  emit argcode=&quot;</span><span class="o">+</span><span class="nx">regFound</span><span class="o">+</span><span class="s2">&quot;[&quot;</span><span class="o">+</span><span class="nx">regidx</span><span class="o">+</span><span class="s2">&quot;][&quot;</span><span class="o">+</span><span class="nx">regmask</span><span class="o">+</span><span class="s2">&quot;]&quot;</span> <span class="p">);</span>
                    <span class="k">if</span> <span class="p">(</span> <span class="nx">isDest</span> <span class="p">)</span>
                    <span class="p">{</span>												
                        <span class="nx">agalcode</span><span class="p">.</span><span class="nx">writeShort</span><span class="p">(</span> <span class="nx">regidx</span> <span class="p">);</span>
                        <span class="nx">agalcode</span><span class="p">.</span><span class="nx">writeByte</span><span class="p">(</span> <span class="nx">regmask</span> <span class="p">);</span>
                        <span class="nx">agalcode</span><span class="p">.</span><span class="nx">writeByte</span><span class="p">(</span> <span class="nx">regFound</span><span class="p">.</span><span class="nx">emitCode</span> <span class="p">);</span>
                        <span class="nx">pad</span> <span class="o">-=</span> <span class="mi">32</span><span class="o">;</span> 
                    <span class="p">}</span> <span class="k">else</span>
                    <span class="p">{</span>
                        <span class="k">if</span> <span class="p">(</span> <span class="nx">isSampler</span> <span class="p">)</span>
                        <span class="p">{</span>
                            <span class="k">if</span> <span class="p">(</span> <span class="nx">verbose</span> <span class="p">)</span>
                                <span class="nf">trace</span><span class="p">(</span> <span class="s2">&quot;  emit sampler&quot;</span> <span class="p">);</span>
                            <span class="k">var</span> <span class="nx">samplerbits</span><span class="o">:</span><span class="nb">uint</span> <span class="o">=</span> <span class="mi">5</span><span class="o">;</span> <span class="c1">// type 5 </span>
                            <span class="k">var</span> <span class="nx">optsLength</span><span class="o">:</span><span class="nb">uint</span> <span class="o">=</span> <span class="nx">opts</span><span class="p">.</span><span class="nx">length</span><span class="o">;</span>
                            <span class="k">for</span> <span class="p">(</span> <span class="nx">k</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="nx">k</span><span class="o">&lt;</span><span class="nx">optsLength</span><span class="o">;</span> <span class="nx">k</span><span class="o">++</span> <span class="p">)</span>
                            <span class="p">{</span>
                                <span class="k">if</span> <span class="p">(</span> <span class="nx">verbose</span> <span class="p">)</span>
                                    <span class="nf">trace</span><span class="p">(</span> <span class="s2">&quot;    opt: &quot;</span><span class="o">+</span><span class="nx">opts</span><span class="p">[</span><span class="nx">k</span><span class="p">]</span> <span class="p">);</span>
                                <span class="k">var</span> <span class="nx">optfound</span><span class="o">:</span><span class="nx">Sampler</span> <span class="o">=</span> <span class="nx">SAMPLEMAP</span> <span class="p">[</span><span class="nx">opts</span><span class="p">[</span><span class="nx">k</span><span class="p">]];</span>
                                <span class="k">if</span> <span class="p">(</span> <span class="nx">optfound</span> <span class="o">==</span> <span class="kc">null</span> <span class="p">)</span>
                                <span class="p">{</span>
                                    <span class="nf">trace</span><span class="p">(</span> <span class="s2">&quot;Warning, unknown sampler option: &quot;</span><span class="o">+</span><span class="nx">opts</span><span class="p">[</span><span class="nx">k</span><span class="p">]</span> <span class="p">);</span>
                                <span class="p">}</span>
                                <span class="k">else</span>
                                <span class="p">{</span>
                                    <span class="k">if</span> <span class="p">(</span> <span class="nx">optfound</span><span class="p">.</span><span class="nx">flag</span> <span class="o">!=</span> <span class="nx">SAMPLER_SPECIAL_SHIFT</span> <span class="p">)</span>
                                        <span class="nx">samplerbits</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="p">(</span> <span class="mh">0xf</span> <span class="o">&lt;&lt;</span> <span class="nx">optfound</span><span class="p">.</span><span class="nx">flag</span> <span class="p">);</span>										
                                    <span class="nx">samplerbits</span> <span class="o">|=</span> <span class="nb">uint</span><span class="p">(</span> <span class="nx">optfound</span><span class="p">.</span><span class="nx">mask</span> <span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="nb">uint</span><span class="p">(</span> <span class="nx">optfound</span><span class="p">.</span><span class="nx">flag</span> <span class="p">);</span>
                                <span class="p">}</span>
                            <span class="p">}</span>
                            <span class="nx">agalcode</span><span class="p">.</span><span class="nx">writeShort</span><span class="p">(</span> <span class="nx">regidx</span> <span class="p">);</span>
                            <span class="nx">agalcode</span><span class="p">.</span><span class="nx">writeShort</span><span class="p">(</span> <span class="mi">0</span> <span class="p">);</span>
                            <span class="nx">agalcode</span><span class="p">.</span><span class="nx">writeUnsignedInt</span><span class="p">(</span> <span class="nx">samplerbits</span> <span class="p">);</span>
                            
                            <span class="k">if</span> <span class="p">(</span> <span class="nx">verbose</span> <span class="p">)</span>
                                <span class="nf">trace</span><span class="p">(</span> <span class="s2">&quot;    bits: &quot;</span> <span class="o">+</span> <span class="p">(</span> <span class="nx">samplerbits</span> <span class="o">-</span> <span class="mi">5</span> <span class="p">)</span> <span class="p">);</span>
                            <span class="nx">pad</span> <span class="o">-=</span> <span class="mi">64</span><span class="o">;</span>
                        <span class="p">}</span>
                        <span class="k">else</span>
                        <span class="p">{</span>
                            <span class="k">if</span> <span class="p">(</span> <span class="nx">j</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">)</span>
                            <span class="p">{</span>
                                <span class="nx">agalcode</span><span class="p">.</span><span class="nx">writeUnsignedInt</span><span class="p">(</span> <span class="mi">0</span> <span class="p">);</span>
                                <span class="nx">pad</span> <span class="o">-=</span> <span class="mi">32</span><span class="o">;</span>
                            <span class="p">}</span>
                            <span class="nx">agalcode</span><span class="p">.</span><span class="nx">writeShort</span><span class="p">(</span> <span class="nx">regidx</span> <span class="p">);</span>
                            <span class="nx">agalcode</span><span class="p">.</span><span class="nx">writeByte</span><span class="p">(</span> <span class="nx">reloffset</span> <span class="p">);</span>
                            <span class="nx">agalcode</span><span class="p">.</span><span class="nx">writeByte</span><span class="p">(</span> <span class="nx">regmask</span> <span class="p">);</span>
                            <span class="nx">agalcode</span><span class="p">.</span><span class="nx">writeByte</span><span class="p">(</span> <span class="nx">regFound</span><span class="p">.</span><span class="nx">emitCode</span> <span class="p">);</span>
                            <span class="nx">agalcode</span><span class="p">.</span><span class="nx">writeByte</span><span class="p">(</span> <span class="nx">reltype</span> <span class="p">);</span>
                            <span class="nx">agalcode</span><span class="p">.</span><span class="nx">writeShort</span><span class="p">(</span> <span class="nx">isRelative</span> <span class="o">?</span> <span class="p">(</span> <span class="nx">relsel</span> <span class="o">|</span> <span class="p">(</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">15</span> <span class="p">)</span> <span class="p">)</span> <span class="o">:</span> <span class="mi">0</span> <span class="p">);</span>
                            
                            <span class="nx">pad</span> <span class="o">-=</span> <span class="mi">64</span><span class="o">;</span>
                        <span class="p">}</span>
                    <span class="p">}</span>
                <span class="p">}</span>
                </pre></div>             </td>           </tr>                               <tr id="section-16">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-16">&#182;</a>               </div>               <p>pad unused regs</p>             </td>             <td class="code">               <div class="highlight"><pre>                <span class="k">for</span> <span class="p">(</span> <span class="nx">j</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">pad</span><span class="o">;</span> <span class="nx">j</span> <span class="o">+=</span> <span class="mi">8</span> <span class="p">)</span> 
                    <span class="nx">agalcode</span><span class="p">.</span><span class="nx">writeByte</span><span class="p">(</span> <span class="mi">0</span> <span class="p">);</span>
                
                <span class="k">if</span> <span class="p">(</span> <span class="nx">badreg</span> <span class="p">)</span>
                    <span class="k">break</span><span class="o">;</span>
            <span class="p">}</span>
            
            <span class="k">if</span> <span class="p">(</span> <span class="nx">_error</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span> <span class="p">)</span>
            <span class="p">{</span>
                <span class="nx">_error</span> <span class="o">+=</span> <span class="s2">&quot;\n  at line &quot;</span> <span class="o">+</span> <span class="nx">i</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="nx">lines</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
                <span class="nx">agalcode</span><span class="p">.</span><span class="nx">length</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
                <span class="nf">trace</span><span class="p">(</span> <span class="nx">_error</span> <span class="p">);</span>
            <span class="p">}</span>
            </pre></div>             </td>           </tr>                               <tr id="section-17">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-17">&#182;</a>               </div>               <p>trace the bytecode bytes if debugging is enabled</p>             </td>             <td class="code">               <div class="highlight"><pre>            <span class="k">if</span> <span class="p">(</span> <span class="nx">debugEnabled</span> <span class="p">)</span>
            <span class="p">{</span>
                <span class="k">var</span> <span class="nx">dbgLine</span><span class="o">:</span><span class="nb">String</span> <span class="o">=</span> <span class="s2">&quot;generated bytecode:&quot;</span><span class="o">;</span>
                <span class="k">var</span> <span class="nx">agalLength</span><span class="o">:</span><span class="nb">uint</span> <span class="o">=</span> <span class="nx">agalcode</span><span class="p">.</span><span class="nx">length</span><span class="o">;</span>
                <span class="k">for</span> <span class="p">(</span> <span class="k">var</span> <span class="nx">index</span><span class="o">:</span><span class="nb">uint</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="nx">index</span> <span class="o">&lt;</span> <span class="nx">agalLength</span><span class="o">;</span> <span class="nx">index</span><span class="o">++</span> <span class="p">)</span>
                <span class="p">{</span>
                    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="p">(</span> <span class="nx">index</span> <span class="o">%</span> <span class="mi">16</span> <span class="p">)</span> <span class="p">)</span>
                        <span class="nx">dbgLine</span> <span class="o">+=</span> <span class="s2">&quot;\n&quot;</span><span class="o">;</span>
                    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="p">(</span> <span class="nx">index</span> <span class="o">%</span> <span class="mi">4</span> <span class="p">)</span> <span class="p">)</span>
                        <span class="nx">dbgLine</span> <span class="o">+=</span> <span class="s2">&quot; &quot;</span><span class="o">;</span>
                    
                    <span class="k">var</span> <span class="nx">byteStr</span><span class="o">:</span><span class="nb">String</span> <span class="o">=</span> <span class="nx">agalcode</span><span class="p">[</span> <span class="nx">index</span> <span class="p">].</span><span class="nx">toString</span><span class="p">(</span> <span class="mi">16</span> <span class="p">);</span>
                    <span class="k">if</span> <span class="p">(</span> <span class="nx">byteStr</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="mi">2</span> <span class="p">)</span>
                        <span class="nx">byteStr</span> <span class="o">=</span> <span class="s2">&quot;0&quot;</span> <span class="o">+</span> <span class="nx">byteStr</span><span class="o">;</span>
                    
                    <span class="nx">dbgLine</span> <span class="o">+=</span> <span class="nx">byteStr</span><span class="o">;</span>
                <span class="p">}</span>
                <span class="nf">trace</span><span class="p">(</span> <span class="nx">dbgLine</span> <span class="p">);</span>
            <span class="p">}</span>
            
            <span class="k">if</span> <span class="p">(</span> <span class="nx">verbose</span> <span class="p">)</span>
                <span class="nf">trace</span><span class="p">(</span> <span class="s2">&quot;AGALMiniAssembler.assemble time: &quot;</span> <span class="o">+</span> <span class="p">(</span> <span class="p">(</span> <span class="nf">getTimer</span><span class="p">()</span> <span class="o">-</span> <span class="nx">start</span> <span class="p">)</span> <span class="o">/</span> <span class="mi">1000</span> <span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;s&quot;</span> <span class="p">);</span>
            
            <span class="k">return</span> <span class="nx">agalcode</span><span class="o">;</span>
        <span class="p">}</span>
        
        <span class="kd">static</span> <span class="kd">private</span> <span class="kd">function</span> <span class="nx">init</span><span class="p">()</span><span class="o">:</span><span class="nx">void</span>
        <span class="p">{</span>
            <span class="nx">initialized</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
            </pre></div>             </td>           </tr>                               <tr id="section-18">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-18">&#182;</a>               </div>               <p>Fill the dictionaries with opcodes and registers</p>             </td>             <td class="code">               <div class="highlight"><pre>            <span class="nx">OPMAP</span><span class="p">[</span> <span class="nx">MOV</span> <span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OpCode</span><span class="p">(</span> <span class="nx">MOV</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mh">0x00</span><span class="o">,</span> <span class="mi">0</span> <span class="p">);</span>
            <span class="nx">OPMAP</span><span class="p">[</span> <span class="nx">ADD</span> <span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OpCode</span><span class="p">(</span> <span class="nx">ADD</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mh">0x01</span><span class="o">,</span> <span class="mi">0</span> <span class="p">);</span>
            <span class="nx">OPMAP</span><span class="p">[</span> <span class="nx">SUB</span> <span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OpCode</span><span class="p">(</span> <span class="nx">SUB</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mh">0x02</span><span class="o">,</span> <span class="mi">0</span> <span class="p">);</span>
            <span class="nx">OPMAP</span><span class="p">[</span> <span class="nx">MUL</span> <span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OpCode</span><span class="p">(</span> <span class="nx">MUL</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mh">0x03</span><span class="o">,</span> <span class="mi">0</span> <span class="p">);</span>
            <span class="nx">OPMAP</span><span class="p">[</span> <span class="nx">DIV</span> <span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OpCode</span><span class="p">(</span> <span class="nx">DIV</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mh">0x04</span><span class="o">,</span> <span class="mi">0</span> <span class="p">);</span>
            <span class="nx">OPMAP</span><span class="p">[</span> <span class="nx">RCP</span> <span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OpCode</span><span class="p">(</span> <span class="nx">RCP</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mh">0x05</span><span class="o">,</span> <span class="mi">0</span> <span class="p">);</span>					
            <span class="nx">OPMAP</span><span class="p">[</span> <span class="nx">MIN</span> <span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OpCode</span><span class="p">(</span> <span class="nx">MIN</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mh">0x06</span><span class="o">,</span> <span class="mi">0</span> <span class="p">);</span>
            <span class="nx">OPMAP</span><span class="p">[</span> <span class="nx">MAX</span> <span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OpCode</span><span class="p">(</span> <span class="nx">MAX</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mh">0x07</span><span class="o">,</span> <span class="mi">0</span> <span class="p">);</span>
            <span class="nx">OPMAP</span><span class="p">[</span> <span class="nx">FRC</span> <span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OpCode</span><span class="p">(</span> <span class="nx">FRC</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mh">0x08</span><span class="o">,</span> <span class="mi">0</span> <span class="p">);</span>			
            <span class="nx">OPMAP</span><span class="p">[</span> <span class="nx">SQT</span> <span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OpCode</span><span class="p">(</span> <span class="nx">SQT</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mh">0x09</span><span class="o">,</span> <span class="mi">0</span> <span class="p">);</span>
            <span class="nx">OPMAP</span><span class="p">[</span> <span class="nx">RSQ</span> <span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OpCode</span><span class="p">(</span> <span class="nx">RSQ</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mh">0x0a</span><span class="o">,</span> <span class="mi">0</span> <span class="p">);</span>
            <span class="nx">OPMAP</span><span class="p">[</span> <span class="nx">POW</span> <span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OpCode</span><span class="p">(</span> <span class="nx">POW</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mh">0x0b</span><span class="o">,</span> <span class="mi">0</span> <span class="p">);</span>
            <span class="nx">OPMAP</span><span class="p">[</span> <span class="nx">LOG</span> <span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OpCode</span><span class="p">(</span> <span class="nx">LOG</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mh">0x0c</span><span class="o">,</span> <span class="mi">0</span> <span class="p">);</span>
            <span class="nx">OPMAP</span><span class="p">[</span> <span class="nx">EXP</span> <span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OpCode</span><span class="p">(</span> <span class="nx">EXP</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mh">0x0d</span><span class="o">,</span> <span class="mi">0</span> <span class="p">);</span>
            <span class="nx">OPMAP</span><span class="p">[</span> <span class="nx">NRM</span> <span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OpCode</span><span class="p">(</span> <span class="nx">NRM</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mh">0x0e</span><span class="o">,</span> <span class="mi">0</span> <span class="p">);</span>
            <span class="nx">OPMAP</span><span class="p">[</span> <span class="nx">SIN</span> <span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OpCode</span><span class="p">(</span> <span class="nx">SIN</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mh">0x0f</span><span class="o">,</span> <span class="mi">0</span> <span class="p">);</span>
            <span class="nx">OPMAP</span><span class="p">[</span> <span class="nx">COS</span> <span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OpCode</span><span class="p">(</span> <span class="nx">COS</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mh">0x10</span><span class="o">,</span> <span class="mi">0</span> <span class="p">);</span>
            <span class="nx">OPMAP</span><span class="p">[</span> <span class="nx">CRS</span> <span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OpCode</span><span class="p">(</span> <span class="nx">CRS</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mh">0x11</span><span class="o">,</span> <span class="mi">0</span> <span class="p">);</span>
            <span class="nx">OPMAP</span><span class="p">[</span> <span class="nx">DP3</span> <span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OpCode</span><span class="p">(</span> <span class="nx">DP3</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mh">0x12</span><span class="o">,</span> <span class="mi">0</span> <span class="p">);</span>
            <span class="nx">OPMAP</span><span class="p">[</span> <span class="nx">DP4</span> <span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OpCode</span><span class="p">(</span> <span class="nx">DP4</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mh">0x13</span><span class="o">,</span> <span class="mi">0</span> <span class="p">);</span>					
            <span class="nx">OPMAP</span><span class="p">[</span> <span class="nx">ABS</span> <span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OpCode</span><span class="p">(</span> <span class="nx">ABS</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mh">0x14</span><span class="o">,</span> <span class="mi">0</span> <span class="p">);</span>
            <span class="nx">OPMAP</span><span class="p">[</span> <span class="nx">NEG</span> <span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OpCode</span><span class="p">(</span> <span class="nx">NEG</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mh">0x15</span><span class="o">,</span> <span class="mi">0</span> <span class="p">);</span>
            <span class="nx">OPMAP</span><span class="p">[</span> <span class="nx">SAT</span> <span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OpCode</span><span class="p">(</span> <span class="nx">SAT</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mh">0x16</span><span class="o">,</span> <span class="mi">0</span> <span class="p">);</span>
            <span class="nx">OPMAP</span><span class="p">[</span> <span class="nx">M33</span> <span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OpCode</span><span class="p">(</span> <span class="nx">M33</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mh">0x17</span><span class="o">,</span> <span class="nx">OP_SPECIAL_MATRIX</span> <span class="p">);</span>
            <span class="nx">OPMAP</span><span class="p">[</span> <span class="nx">M44</span> <span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OpCode</span><span class="p">(</span> <span class="nx">M44</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mh">0x18</span><span class="o">,</span> <span class="nx">OP_SPECIAL_MATRIX</span> <span class="p">);</span>
            <span class="nx">OPMAP</span><span class="p">[</span> <span class="nx">M34</span> <span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OpCode</span><span class="p">(</span> <span class="nx">M34</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mh">0x19</span><span class="o">,</span> <span class="nx">OP_SPECIAL_MATRIX</span> <span class="p">);</span>			
            <span class="nx">OPMAP</span><span class="p">[</span> <span class="nx">IFZ</span> <span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OpCode</span><span class="p">(</span> <span class="nx">IFZ</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="mh">0x1a</span><span class="o">,</span> <span class="nx">OP_NO_DEST</span> <span class="o">|</span> <span class="nx">OP_INC_NEST</span> <span class="o">|</span> <span class="nx">OP_SCALAR</span> <span class="p">);</span>
            <span class="nx">OPMAP</span><span class="p">[</span> <span class="nx">INZ</span> <span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OpCode</span><span class="p">(</span> <span class="nx">INZ</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="mh">0x1b</span><span class="o">,</span> <span class="nx">OP_NO_DEST</span> <span class="o">|</span> <span class="nx">OP_INC_NEST</span> <span class="o">|</span> <span class="nx">OP_SCALAR</span> <span class="p">);</span>
            <span class="nx">OPMAP</span><span class="p">[</span> <span class="nx">IFE</span> <span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OpCode</span><span class="p">(</span> <span class="nx">IFE</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mh">0x1c</span><span class="o">,</span> <span class="nx">OP_NO_DEST</span> <span class="o">|</span> <span class="nx">OP_INC_NEST</span> <span class="o">|</span> <span class="nx">OP_SCALAR</span> <span class="p">);</span>
            <span class="nx">OPMAP</span><span class="p">[</span> <span class="nx">INE</span> <span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OpCode</span><span class="p">(</span> <span class="nx">INE</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mh">0x1d</span><span class="o">,</span> <span class="nx">OP_NO_DEST</span> <span class="o">|</span> <span class="nx">OP_INC_NEST</span> <span class="o">|</span> <span class="nx">OP_SCALAR</span> <span class="p">);</span>
            <span class="nx">OPMAP</span><span class="p">[</span> <span class="nx">IFG</span> <span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OpCode</span><span class="p">(</span> <span class="nx">IFG</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mh">0x1e</span><span class="o">,</span> <span class="nx">OP_NO_DEST</span> <span class="o">|</span> <span class="nx">OP_INC_NEST</span> <span class="o">|</span> <span class="nx">OP_SCALAR</span> <span class="p">);</span>
            <span class="nx">OPMAP</span><span class="p">[</span> <span class="nx">IFL</span> <span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OpCode</span><span class="p">(</span> <span class="nx">IFL</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mh">0x1f</span><span class="o">,</span> <span class="nx">OP_NO_DEST</span> <span class="o">|</span> <span class="nx">OP_INC_NEST</span> <span class="o">|</span> <span class="nx">OP_SCALAR</span> <span class="p">);</span>
            <span class="nx">OPMAP</span><span class="p">[</span> <span class="nx">IEG</span> <span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OpCode</span><span class="p">(</span> <span class="nx">IEG</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mh">0x20</span><span class="o">,</span> <span class="nx">OP_NO_DEST</span> <span class="o">|</span> <span class="nx">OP_INC_NEST</span> <span class="o">|</span> <span class="nx">OP_SCALAR</span> <span class="p">);</span>
            <span class="nx">OPMAP</span><span class="p">[</span> <span class="nx">IEL</span> <span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OpCode</span><span class="p">(</span> <span class="nx">IEL</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mh">0x21</span><span class="o">,</span> <span class="nx">OP_NO_DEST</span> <span class="o">|</span> <span class="nx">OP_INC_NEST</span> <span class="o">|</span> <span class="nx">OP_SCALAR</span> <span class="p">);</span>
            <span class="nx">OPMAP</span><span class="p">[</span> <span class="nx">ELS</span> <span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OpCode</span><span class="p">(</span> <span class="nx">ELS</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mh">0x22</span><span class="o">,</span> <span class="nx">OP_NO_DEST</span> <span class="o">|</span> <span class="nx">OP_INC_NEST</span> <span class="o">|</span> <span class="nx">OP_DEC_NEST</span> <span class="p">);</span>
            <span class="nx">OPMAP</span><span class="p">[</span> <span class="nx">EIF</span> <span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OpCode</span><span class="p">(</span> <span class="nx">EIF</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mh">0x23</span><span class="o">,</span> <span class="nx">OP_NO_DEST</span> <span class="o">|</span> <span class="nx">OP_DEC_NEST</span> <span class="p">);</span>
            <span class="nx">OPMAP</span><span class="p">[</span> <span class="nx">REP</span> <span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OpCode</span><span class="p">(</span> <span class="nx">REP</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="mh">0x24</span><span class="o">,</span> <span class="nx">OP_NO_DEST</span> <span class="o">|</span> <span class="nx">OP_INC_NEST</span> <span class="o">|</span> <span class="nx">OP_SCALAR</span> <span class="p">);</span>
            <span class="nx">OPMAP</span><span class="p">[</span> <span class="nx">ERP</span> <span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OpCode</span><span class="p">(</span> <span class="nx">ERP</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mh">0x25</span><span class="o">,</span> <span class="nx">OP_NO_DEST</span> <span class="o">|</span> <span class="nx">OP_DEC_NEST</span> <span class="p">);</span>
            <span class="nx">OPMAP</span><span class="p">[</span> <span class="nx">BRK</span> <span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OpCode</span><span class="p">(</span> <span class="nx">BRK</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mh">0x26</span><span class="o">,</span> <span class="nx">OP_NO_DEST</span> <span class="p">);</span>
            <span class="nx">OPMAP</span><span class="p">[</span> <span class="nx">KIL</span> <span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OpCode</span><span class="p">(</span> <span class="nx">KIL</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="mh">0x27</span><span class="o">,</span> <span class="nx">OP_NO_DEST</span> <span class="o">|</span> <span class="nx">OP_FRAG_ONLY</span> <span class="p">);</span>
            <span class="nx">OPMAP</span><span class="p">[</span> <span class="nx">TEX</span> <span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OpCode</span><span class="p">(</span> <span class="nx">TEX</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mh">0x28</span><span class="o">,</span> <span class="nx">OP_FRAG_ONLY</span> <span class="o">|</span> <span class="nx">OP_SPECIAL_TEX</span> <span class="p">);</span>
            <span class="nx">OPMAP</span><span class="p">[</span> <span class="nx">SGE</span> <span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OpCode</span><span class="p">(</span> <span class="nx">SGE</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mh">0x29</span><span class="o">,</span> <span class="mi">0</span> <span class="p">);</span>
            <span class="nx">OPMAP</span><span class="p">[</span> <span class="nx">SLT</span> <span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OpCode</span><span class="p">(</span> <span class="nx">SLT</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mh">0x2a</span><span class="o">,</span> <span class="mi">0</span> <span class="p">);</span>
            <span class="nx">OPMAP</span><span class="p">[</span> <span class="nx">SGN</span> <span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OpCode</span><span class="p">(</span> <span class="nx">SGN</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mh">0x2b</span><span class="o">,</span> <span class="mi">0</span> <span class="p">);</span>
            
            <span class="nx">REGMAP</span><span class="p">[</span> <span class="nx">VA</span> <span class="p">]</span>	<span class="o">=</span> <span class="k">new</span> <span class="nx">Register</span><span class="p">(</span> <span class="nx">VA</span><span class="o">,</span>	<span class="s2">&quot;vertex attribute&quot;</span><span class="o">,</span>		<span class="mh">0x0</span><span class="o">,</span>	<span class="mi">7</span><span class="o">,</span>		<span class="nx">REG_VERT</span> <span class="o">|</span> <span class="nx">REG_READ</span> <span class="p">);</span>
            <span class="nx">REGMAP</span><span class="p">[</span> <span class="nx">VC</span> <span class="p">]</span>	<span class="o">=</span> <span class="k">new</span> <span class="nx">Register</span><span class="p">(</span> <span class="nx">VC</span><span class="o">,</span>	<span class="s2">&quot;vertex constant&quot;</span><span class="o">,</span>		<span class="mh">0x1</span><span class="o">,</span>	<span class="mi">127</span><span class="o">,</span>	<span class="nx">REG_VERT</span> <span class="o">|</span> <span class="nx">REG_READ</span> <span class="p">);</span>
            <span class="nx">REGMAP</span><span class="p">[</span> <span class="nx">VT</span> <span class="p">]</span>	<span class="o">=</span> <span class="k">new</span> <span class="nx">Register</span><span class="p">(</span> <span class="nx">VT</span><span class="o">,</span>	<span class="s2">&quot;vertex temporary&quot;</span><span class="o">,</span>		<span class="mh">0x2</span><span class="o">,</span>	<span class="mi">7</span><span class="o">,</span>		<span class="nx">REG_VERT</span> <span class="o">|</span> <span class="nx">REG_WRITE</span> <span class="o">|</span> <span class="nx">REG_READ</span> <span class="p">);</span>
            <span class="nx">REGMAP</span><span class="p">[</span> <span class="nx">OP</span> <span class="p">]</span>	<span class="o">=</span> <span class="k">new</span> <span class="nx">Register</span><span class="p">(</span> <span class="nx">OP</span><span class="o">,</span>	<span class="s2">&quot;vertex output&quot;</span><span class="o">,</span>		<span class="mh">0x3</span><span class="o">,</span>	<span class="mi">0</span><span class="o">,</span>		<span class="nx">REG_VERT</span> <span class="o">|</span> <span class="nx">REG_WRITE</span> <span class="p">);</span>
            <span class="nx">REGMAP</span><span class="p">[</span> <span class="nx">V</span> <span class="p">]</span>		<span class="o">=</span> <span class="k">new</span> <span class="nx">Register</span><span class="p">(</span> <span class="nx">V</span><span class="o">,</span>	<span class="s2">&quot;varying&quot;</span><span class="o">,</span>				<span class="mh">0x4</span><span class="o">,</span>	<span class="mi">7</span><span class="o">,</span>		<span class="nx">REG_VERT</span> <span class="o">|</span> <span class="nx">REG_FRAG</span> <span class="o">|</span> <span class="nx">REG_READ</span> <span class="o">|</span> <span class="nx">REG_WRITE</span> <span class="p">);</span>
            <span class="nx">REGMAP</span><span class="p">[</span> <span class="nx">FC</span> <span class="p">]</span>	<span class="o">=</span> <span class="k">new</span> <span class="nx">Register</span><span class="p">(</span> <span class="nx">FC</span><span class="o">,</span>	<span class="s2">&quot;fragment constant&quot;</span><span class="o">,</span>	<span class="mh">0x1</span><span class="o">,</span>	<span class="mi">27</span><span class="o">,</span>		<span class="nx">REG_FRAG</span> <span class="o">|</span> <span class="nx">REG_READ</span> <span class="p">);</span>
            <span class="nx">REGMAP</span><span class="p">[</span> <span class="nx">FT</span> <span class="p">]</span>	<span class="o">=</span> <span class="k">new</span> <span class="nx">Register</span><span class="p">(</span> <span class="nx">FT</span><span class="o">,</span>	<span class="s2">&quot;fragment temporary&quot;</span><span class="o">,</span>	<span class="mh">0x2</span><span class="o">,</span>	<span class="mi">7</span><span class="o">,</span>		<span class="nx">REG_FRAG</span> <span class="o">|</span> <span class="nx">REG_WRITE</span> <span class="o">|</span> <span class="nx">REG_READ</span> <span class="p">);</span>
            <span class="nx">REGMAP</span><span class="p">[</span> <span class="nx">FS</span> <span class="p">]</span>	<span class="o">=</span> <span class="k">new</span> <span class="nx">Register</span><span class="p">(</span> <span class="nx">FS</span><span class="o">,</span>	<span class="s2">&quot;texture sampler&quot;</span><span class="o">,</span>		<span class="mh">0x5</span><span class="o">,</span>	<span class="mi">7</span><span class="o">,</span>		<span class="nx">REG_FRAG</span> <span class="o">|</span> <span class="nx">REG_READ</span> <span class="p">);</span>
            <span class="nx">REGMAP</span><span class="p">[</span> <span class="nx">OC</span> <span class="p">]</span>	<span class="o">=</span> <span class="k">new</span> <span class="nx">Register</span><span class="p">(</span> <span class="nx">OC</span><span class="o">,</span>	<span class="s2">&quot;fragment output&quot;</span><span class="o">,</span>		<span class="mh">0x3</span><span class="o">,</span>	<span class="mi">0</span><span class="o">,</span>		<span class="nx">REG_FRAG</span> <span class="o">|</span> <span class="nx">REG_WRITE</span> <span class="p">);</span>
            
            <span class="nx">SAMPLEMAP</span><span class="p">[</span> <span class="nx">D2</span> <span class="p">]</span>			<span class="o">=</span> <span class="k">new</span> <span class="nx">Sampler</span><span class="p">(</span> <span class="nx">D2</span><span class="o">,</span>			<span class="nx">SAMPLER_DIM_SHIFT</span><span class="o">,</span>		<span class="mi">0</span> <span class="p">);</span>
            <span class="nx">SAMPLEMAP</span><span class="p">[</span> <span class="nx">D3</span> <span class="p">]</span>			<span class="o">=</span> <span class="k">new</span> <span class="nx">Sampler</span><span class="p">(</span> <span class="nx">D3</span><span class="o">,</span>			<span class="nx">SAMPLER_DIM_SHIFT</span><span class="o">,</span>		<span class="mi">2</span> <span class="p">);</span>
            <span class="nx">SAMPLEMAP</span><span class="p">[</span> <span class="nx">CUBE</span> <span class="p">]</span>		<span class="o">=</span> <span class="k">new</span> <span class="nx">Sampler</span><span class="p">(</span> <span class="nx">CUBE</span><span class="o">,</span>		<span class="nx">SAMPLER_DIM_SHIFT</span><span class="o">,</span>		<span class="mi">1</span> <span class="p">);</span>
            <span class="nx">SAMPLEMAP</span><span class="p">[</span> <span class="nx">MIPNEAREST</span> <span class="p">]</span>	<span class="o">=</span> <span class="k">new</span> <span class="nx">Sampler</span><span class="p">(</span> <span class="nx">MIPNEAREST</span><span class="o">,</span>	<span class="nx">SAMPLER_MIPMAP_SHIFT</span><span class="o">,</span>	<span class="mi">1</span> <span class="p">);</span>
            <span class="nx">SAMPLEMAP</span><span class="p">[</span> <span class="nx">MIPLINEAR</span> <span class="p">]</span>	<span class="o">=</span> <span class="k">new</span> <span class="nx">Sampler</span><span class="p">(</span> <span class="nx">MIPLINEAR</span><span class="o">,</span>	<span class="nx">SAMPLER_MIPMAP_SHIFT</span><span class="o">,</span>	<span class="mi">2</span> <span class="p">);</span>
            <span class="nx">SAMPLEMAP</span><span class="p">[</span> <span class="nx">MIPNONE</span> <span class="p">]</span>	<span class="o">=</span> <span class="k">new</span> <span class="nx">Sampler</span><span class="p">(</span> <span class="nx">MIPNONE</span><span class="o">,</span>		<span class="nx">SAMPLER_MIPMAP_SHIFT</span><span class="o">,</span>	<span class="mi">0</span> <span class="p">);</span>
            <span class="nx">SAMPLEMAP</span><span class="p">[</span> <span class="nx">NOMIP</span> <span class="p">]</span>		<span class="o">=</span> <span class="k">new</span> <span class="nx">Sampler</span><span class="p">(</span> <span class="nx">NOMIP</span><span class="o">,</span>		<span class="nx">SAMPLER_MIPMAP_SHIFT</span><span class="o">,</span>	<span class="mi">0</span> <span class="p">);</span>
            <span class="nx">SAMPLEMAP</span><span class="p">[</span> <span class="nx">NEAREST</span> <span class="p">]</span>	<span class="o">=</span> <span class="k">new</span> <span class="nx">Sampler</span><span class="p">(</span> <span class="nx">NEAREST</span><span class="o">,</span>		<span class="nx">SAMPLER_FILTER_SHIFT</span><span class="o">,</span>	<span class="mi">0</span> <span class="p">);</span>
            <span class="nx">SAMPLEMAP</span><span class="p">[</span> <span class="nx">LINEAR</span> <span class="p">]</span>		<span class="o">=</span> <span class="k">new</span> <span class="nx">Sampler</span><span class="p">(</span> <span class="nx">LINEAR</span><span class="o">,</span>		<span class="nx">SAMPLER_FILTER_SHIFT</span><span class="o">,</span>	<span class="mi">1</span> <span class="p">);</span>
            <span class="nx">SAMPLEMAP</span><span class="p">[</span> <span class="nx">CENTROID</span> <span class="p">]</span>	<span class="o">=</span> <span class="k">new</span> <span class="nx">Sampler</span><span class="p">(</span> <span class="nx">CENTROID</span><span class="o">,</span>	<span class="nx">SAMPLER_SPECIAL_SHIFT</span><span class="o">,</span>	<span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">0</span> <span class="p">);</span>
            <span class="nx">SAMPLEMAP</span><span class="p">[</span> <span class="nx">SINGLE</span> <span class="p">]</span>		<span class="o">=</span> <span class="k">new</span> <span class="nx">Sampler</span><span class="p">(</span> <span class="nx">SINGLE</span><span class="o">,</span>		<span class="nx">SAMPLER_SPECIAL_SHIFT</span><span class="o">,</span>	<span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span> <span class="p">);</span>
            <span class="nx">SAMPLEMAP</span><span class="p">[</span> <span class="nx">DEPTH</span> <span class="p">]</span>		<span class="o">=</span> <span class="k">new</span> <span class="nx">Sampler</span><span class="p">(</span> <span class="nx">DEPTH</span><span class="o">,</span>		<span class="nx">SAMPLER_SPECIAL_SHIFT</span><span class="o">,</span>	<span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">2</span> <span class="p">);</span>
            <span class="nx">SAMPLEMAP</span><span class="p">[</span> <span class="nx">REPEAT</span> <span class="p">]</span>		<span class="o">=</span> <span class="k">new</span> <span class="nx">Sampler</span><span class="p">(</span> <span class="nx">REPEAT</span><span class="o">,</span>		<span class="nx">SAMPLER_REPEAT_SHIFT</span><span class="o">,</span>	<span class="mi">1</span> <span class="p">);</span>
            <span class="nx">SAMPLEMAP</span><span class="p">[</span> <span class="nx">WRAP</span> <span class="p">]</span>		<span class="o">=</span> <span class="k">new</span> <span class="nx">Sampler</span><span class="p">(</span> <span class="nx">WRAP</span><span class="o">,</span>		<span class="nx">SAMPLER_REPEAT_SHIFT</span><span class="o">,</span>	<span class="mi">1</span> <span class="p">);</span>
            <span class="nx">SAMPLEMAP</span><span class="p">[</span> <span class="nx">CLAMP</span> <span class="p">]</span>		<span class="o">=</span> <span class="k">new</span> <span class="nx">Sampler</span><span class="p">(</span> <span class="nx">CLAMP</span><span class="o">,</span>		<span class="nx">SAMPLER_REPEAT_SHIFT</span><span class="o">,</span>	<span class="mi">0</span> <span class="p">);</span>
        <span class="p">}</span>
        </pre></div>             </td>           </tr>                               <tr id="section-19">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-19">&#182;</a>               </div>               <p>======================================================================</p>

<h2>Constants</h2>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">OPMAP</span><span class="o">:</span><span class="nb">Dictionary</span>					<span class="o">=</span> <span class="k">new</span> <span class="nb">Dictionary</span><span class="p">();</span>
        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">REGMAP</span><span class="o">:</span><span class="nb">Dictionary</span>					<span class="o">=</span> <span class="k">new</span> <span class="nb">Dictionary</span><span class="p">();</span>
        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">SAMPLEMAP</span><span class="o">:</span><span class="nb">Dictionary</span>				<span class="o">=</span> <span class="k">new</span> <span class="nb">Dictionary</span><span class="p">();</span>
        
        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">MAX_NESTING</span><span class="o">:</span><span class="nb">int</span>					<span class="o">=</span> <span class="mi">4</span><span class="o">;</span>
        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">MAX_OPCODES</span><span class="o">:</span><span class="nb">int</span>					<span class="o">=</span> <span class="mi">256</span><span class="o">;</span>
        
        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">FRAGMENT</span><span class="o">:</span><span class="nb">String</span>					<span class="o">=</span> <span class="nx">Context3DProgramType</span><span class="p">.</span><span class="nx">FRAGMENT</span><span class="o">;</span>
        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">VERTEX</span><span class="o">:</span><span class="nb">String</span>						<span class="o">=</span> <span class="nx">Context3DProgramType</span><span class="p">.</span><span class="nx">VERTEX</span><span class="o">;</span>
        </pre></div>             </td>           </tr>                               <tr id="section-20">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-20">&#182;</a>               </div>               <p>masks and shifts</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">SAMPLER_DIM_SHIFT</span><span class="o">:</span><span class="nb">uint</span>				<span class="o">=</span> <span class="mi">12</span><span class="o">;</span>
        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">SAMPLER_SPECIAL_SHIFT</span><span class="o">:</span><span class="nb">uint</span>			<span class="o">=</span> <span class="mi">16</span><span class="o">;</span>
        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">SAMPLER_REPEAT_SHIFT</span><span class="o">:</span><span class="nb">uint</span>			<span class="o">=</span> <span class="mi">20</span><span class="o">;</span>
        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">SAMPLER_MIPMAP_SHIFT</span><span class="o">:</span><span class="nb">uint</span>			<span class="o">=</span> <span class="mi">24</span><span class="o">;</span>
        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">SAMPLER_FILTER_SHIFT</span><span class="o">:</span><span class="nb">uint</span>			<span class="o">=</span> <span class="mi">28</span><span class="o">;</span>
        </pre></div>             </td>           </tr>                               <tr id="section-21">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-21">&#182;</a>               </div>               <p>regmap flags</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">REG_WRITE</span><span class="o">:</span><span class="nb">uint</span>						<span class="o">=</span> <span class="mh">0x1</span><span class="o">;</span>
        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">REG_READ</span><span class="o">:</span><span class="nb">uint</span>						<span class="o">=</span> <span class="mh">0x2</span><span class="o">;</span>
        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">REG_FRAG</span><span class="o">:</span><span class="nb">uint</span>						<span class="o">=</span> <span class="mh">0x20</span><span class="o">;</span>
        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">REG_VERT</span><span class="o">:</span><span class="nb">uint</span>						<span class="o">=</span> <span class="mh">0x40</span><span class="o">;</span>
        </pre></div>             </td>           </tr>                               <tr id="section-22">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-22">&#182;</a>               </div>               <p>opmap flags</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">OP_SCALAR</span><span class="o">:</span><span class="nb">uint</span>						<span class="o">=</span> <span class="mh">0x1</span><span class="o">;</span>
        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">OP_INC_NEST</span><span class="o">:</span><span class="nb">uint</span>					<span class="o">=</span> <span class="mh">0x2</span><span class="o">;</span>
        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">OP_DEC_NEST</span><span class="o">:</span><span class="nb">uint</span>					<span class="o">=</span> <span class="mh">0x4</span><span class="o">;</span>
        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">OP_SPECIAL_TEX</span><span class="o">:</span><span class="nb">uint</span>				<span class="o">=</span> <span class="mh">0x8</span><span class="o">;</span>
        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">OP_SPECIAL_MATRIX</span><span class="o">:</span><span class="nb">uint</span>				<span class="o">=</span> <span class="mh">0x10</span><span class="o">;</span>
        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">OP_FRAG_ONLY</span><span class="o">:</span><span class="nb">uint</span>					<span class="o">=</span> <span class="mh">0x20</span><span class="o">;</span>
        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">OP_VERT_ONLY</span><span class="o">:</span><span class="nb">uint</span>					<span class="o">=</span> <span class="mh">0x40</span><span class="o">;</span>
        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">OP_NO_DEST</span><span class="o">:</span><span class="nb">uint</span>					<span class="o">=</span> <span class="mh">0x80</span><span class="o">;</span>
        </pre></div>             </td>           </tr>                               <tr id="section-23">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-23">&#182;</a>               </div>               <p>opcodes</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">MOV</span><span class="o">:</span><span class="nb">String</span>							<span class="o">=</span> <span class="s2">&quot;mov&quot;</span><span class="o">;</span>
        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">ADD</span><span class="o">:</span><span class="nb">String</span>							<span class="o">=</span> <span class="s2">&quot;add&quot;</span><span class="o">;</span>
        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">SUB</span><span class="o">:</span><span class="nb">String</span>							<span class="o">=</span> <span class="s2">&quot;sub&quot;</span><span class="o">;</span>
        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">MUL</span><span class="o">:</span><span class="nb">String</span>							<span class="o">=</span> <span class="s2">&quot;mul&quot;</span><span class="o">;</span>
        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">DIV</span><span class="o">:</span><span class="nb">String</span>							<span class="o">=</span> <span class="s2">&quot;div&quot;</span><span class="o">;</span>
        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">RCP</span><span class="o">:</span><span class="nb">String</span>							<span class="o">=</span> <span class="s2">&quot;rcp&quot;</span><span class="o">;</span>
        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">MIN</span><span class="o">:</span><span class="nb">String</span>							<span class="o">=</span> <span class="s2">&quot;min&quot;</span><span class="o">;</span>
        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">MAX</span><span class="o">:</span><span class="nb">String</span>							<span class="o">=</span> <span class="s2">&quot;max&quot;</span><span class="o">;</span>
        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">FRC</span><span class="o">:</span><span class="nb">String</span>							<span class="o">=</span> <span class="s2">&quot;frc&quot;</span><span class="o">;</span>
        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">SQT</span><span class="o">:</span><span class="nb">String</span>							<span class="o">=</span> <span class="s2">&quot;sqt&quot;</span><span class="o">;</span>
        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">RSQ</span><span class="o">:</span><span class="nb">String</span>							<span class="o">=</span> <span class="s2">&quot;rsq&quot;</span><span class="o">;</span>
        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">POW</span><span class="o">:</span><span class="nb">String</span>							<span class="o">=</span> <span class="s2">&quot;pow&quot;</span><span class="o">;</span>
        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">LOG</span><span class="o">:</span><span class="nb">String</span>							<span class="o">=</span> <span class="s2">&quot;log&quot;</span><span class="o">;</span>
        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">EXP</span><span class="o">:</span><span class="nb">String</span>							<span class="o">=</span> <span class="s2">&quot;exp&quot;</span><span class="o">;</span>
        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">NRM</span><span class="o">:</span><span class="nb">String</span>							<span class="o">=</span> <span class="s2">&quot;nrm&quot;</span><span class="o">;</span>
        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">SIN</span><span class="o">:</span><span class="nb">String</span>							<span class="o">=</span> <span class="s2">&quot;sin&quot;</span><span class="o">;</span>
        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">COS</span><span class="o">:</span><span class="nb">String</span>							<span class="o">=</span> <span class="s2">&quot;cos&quot;</span><span class="o">;</span>
        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">CRS</span><span class="o">:</span><span class="nb">String</span>							<span class="o">=</span> <span class="s2">&quot;crs&quot;</span><span class="o">;</span>
        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">DP3</span><span class="o">:</span><span class="nb">String</span>							<span class="o">=</span> <span class="s2">&quot;dp3&quot;</span><span class="o">;</span>
        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">DP4</span><span class="o">:</span><span class="nb">String</span>							<span class="o">=</span> <span class="s2">&quot;dp4&quot;</span><span class="o">;</span>
        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">ABS</span><span class="o">:</span><span class="nb">String</span>							<span class="o">=</span> <span class="s2">&quot;abs&quot;</span><span class="o">;</span>
        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">NEG</span><span class="o">:</span><span class="nb">String</span>							<span class="o">=</span> <span class="s2">&quot;neg&quot;</span><span class="o">;</span>
        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">SAT</span><span class="o">:</span><span class="nb">String</span>							<span class="o">=</span> <span class="s2">&quot;sat&quot;</span><span class="o">;</span>
        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">M33</span><span class="o">:</span><span class="nb">String</span>							<span class="o">=</span> <span class="s2">&quot;m33&quot;</span><span class="o">;</span>
        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">M44</span><span class="o">:</span><span class="nb">String</span>							<span class="o">=</span> <span class="s2">&quot;m44&quot;</span><span class="o">;</span>
        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">M34</span><span class="o">:</span><span class="nb">String</span>							<span class="o">=</span> <span class="s2">&quot;m34&quot;</span><span class="o">;</span>
        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">IFZ</span><span class="o">:</span><span class="nb">String</span>							<span class="o">=</span> <span class="s2">&quot;ifz&quot;</span><span class="o">;</span>
        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">INZ</span><span class="o">:</span><span class="nb">String</span>							<span class="o">=</span> <span class="s2">&quot;inz&quot;</span><span class="o">;</span>
        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">IFE</span><span class="o">:</span><span class="nb">String</span>							<span class="o">=</span> <span class="s2">&quot;ife&quot;</span><span class="o">;</span>
        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">INE</span><span class="o">:</span><span class="nb">String</span>							<span class="o">=</span> <span class="s2">&quot;ine&quot;</span><span class="o">;</span>
        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">IFG</span><span class="o">:</span><span class="nb">String</span>							<span class="o">=</span> <span class="s2">&quot;ifg&quot;</span><span class="o">;</span>
        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">IFL</span><span class="o">:</span><span class="nb">String</span>							<span class="o">=</span> <span class="s2">&quot;ifl&quot;</span><span class="o">;</span>
        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">IEG</span><span class="o">:</span><span class="nb">String</span>							<span class="o">=</span> <span class="s2">&quot;ieg&quot;</span><span class="o">;</span>
        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">IEL</span><span class="o">:</span><span class="nb">String</span>							<span class="o">=</span> <span class="s2">&quot;iel&quot;</span><span class="o">;</span>
        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">ELS</span><span class="o">:</span><span class="nb">String</span>							<span class="o">=</span> <span class="s2">&quot;els&quot;</span><span class="o">;</span>
        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">EIF</span><span class="o">:</span><span class="nb">String</span>							<span class="o">=</span> <span class="s2">&quot;eif&quot;</span><span class="o">;</span>
        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">REP</span><span class="o">:</span><span class="nb">String</span>							<span class="o">=</span> <span class="s2">&quot;rep&quot;</span><span class="o">;</span>
        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">ERP</span><span class="o">:</span><span class="nb">String</span>							<span class="o">=</span> <span class="s2">&quot;erp&quot;</span><span class="o">;</span>
        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">BRK</span><span class="o">:</span><span class="nb">String</span>							<span class="o">=</span> <span class="s2">&quot;brk&quot;</span><span class="o">;</span>
        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">KIL</span><span class="o">:</span><span class="nb">String</span>							<span class="o">=</span> <span class="s2">&quot;kil&quot;</span><span class="o">;</span>
        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">TEX</span><span class="o">:</span><span class="nb">String</span>							<span class="o">=</span> <span class="s2">&quot;tex&quot;</span><span class="o">;</span>
        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">SGE</span><span class="o">:</span><span class="nb">String</span>							<span class="o">=</span> <span class="s2">&quot;sge&quot;</span><span class="o">;</span>
        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">SLT</span><span class="o">:</span><span class="nb">String</span>							<span class="o">=</span> <span class="s2">&quot;slt&quot;</span><span class="o">;</span>
        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">SGN</span><span class="o">:</span><span class="nb">String</span>							<span class="o">=</span> <span class="s2">&quot;sgn&quot;</span><span class="o">;</span>
        </pre></div>             </td>           </tr>                               <tr id="section-24">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-24">&#182;</a>               </div>               <p>registers</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">VA</span><span class="o">:</span><span class="nb">String</span>							<span class="o">=</span> <span class="s2">&quot;va&quot;</span><span class="o">;</span>
        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">VC</span><span class="o">:</span><span class="nb">String</span>							<span class="o">=</span> <span class="s2">&quot;vc&quot;</span><span class="o">;</span>
        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">VT</span><span class="o">:</span><span class="nb">String</span>							<span class="o">=</span> <span class="s2">&quot;vt&quot;</span><span class="o">;</span>
        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">OP</span><span class="o">:</span><span class="nb">String</span>							<span class="o">=</span> <span class="s2">&quot;op&quot;</span><span class="o">;</span>
        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">V</span><span class="o">:</span><span class="nb">String</span>							<span class="o">=</span> <span class="s2">&quot;v&quot;</span><span class="o">;</span>
        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">FC</span><span class="o">:</span><span class="nb">String</span>							<span class="o">=</span> <span class="s2">&quot;fc&quot;</span><span class="o">;</span>
        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">FT</span><span class="o">:</span><span class="nb">String</span>							<span class="o">=</span> <span class="s2">&quot;ft&quot;</span><span class="o">;</span>
        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">FS</span><span class="o">:</span><span class="nb">String</span>							<span class="o">=</span> <span class="s2">&quot;fs&quot;</span><span class="o">;</span>
        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">OC</span><span class="o">:</span><span class="nb">String</span>							<span class="o">=</span> <span class="s2">&quot;oc&quot;</span><span class="o">;</span>
        </pre></div>             </td>           </tr>                               <tr id="section-25">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-25">&#182;</a>               </div>               <p>samplers</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">D2</span><span class="o">:</span><span class="nb">String</span>							<span class="o">=</span> <span class="s2">&quot;2d&quot;</span><span class="o">;</span>
        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">D3</span><span class="o">:</span><span class="nb">String</span>							<span class="o">=</span> <span class="s2">&quot;3d&quot;</span><span class="o">;</span>
        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">CUBE</span><span class="o">:</span><span class="nb">String</span>						<span class="o">=</span> <span class="s2">&quot;cube&quot;</span><span class="o">;</span>
        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">MIPNEAREST</span><span class="o">:</span><span class="nb">String</span>					<span class="o">=</span> <span class="s2">&quot;mipnearest&quot;</span><span class="o">;</span>
        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">MIPLINEAR</span><span class="o">:</span><span class="nb">String</span>					<span class="o">=</span> <span class="s2">&quot;miplinear&quot;</span><span class="o">;</span>
        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">MIPNONE</span><span class="o">:</span><span class="nb">String</span>						<span class="o">=</span> <span class="s2">&quot;mipnone&quot;</span><span class="o">;</span>
        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">NOMIP</span><span class="o">:</span><span class="nb">String</span>						<span class="o">=</span> <span class="s2">&quot;nomip&quot;</span><span class="o">;</span>
        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">NEAREST</span><span class="o">:</span><span class="nb">String</span>						<span class="o">=</span> <span class="s2">&quot;nearest&quot;</span><span class="o">;</span>
        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">LINEAR</span><span class="o">:</span><span class="nb">String</span>						<span class="o">=</span> <span class="s2">&quot;linear&quot;</span><span class="o">;</span>
        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">CENTROID</span><span class="o">:</span><span class="nb">String</span>					<span class="o">=</span> <span class="s2">&quot;centroid&quot;</span><span class="o">;</span>
        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">SINGLE</span><span class="o">:</span><span class="nb">String</span>						<span class="o">=</span> <span class="s2">&quot;single&quot;</span><span class="o">;</span>
        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">DEPTH</span><span class="o">:</span><span class="nb">String</span>						<span class="o">=</span> <span class="s2">&quot;depth&quot;</span><span class="o">;</span>
        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">REPEAT</span><span class="o">:</span><span class="nb">String</span>						<span class="o">=</span> <span class="s2">&quot;repeat&quot;</span><span class="o">;</span>
        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">WRAP</span><span class="o">:</span><span class="nb">String</span>						<span class="o">=</span> <span class="s2">&quot;wrap&quot;</span><span class="o">;</span>
        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">CLAMP</span><span class="o">:</span><span class="nb">String</span>						<span class="o">=</span> <span class="s2">&quot;clamp&quot;</span><span class="o">;</span>
    <span class="p">}</span>
<span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-26">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-26">&#182;</a>               </div>               <p>================================================================================</p>

<h2>Helper Classes</h2>             </td>             <td class="code">               <div class="highlight"><pre><span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-27">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-27">&#182;</a>               </div>               <p>===========================================================================</p>

<h2>Class</h2>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="kd">class</span> <span class="nx">OpCode</span>
    <span class="p">{</span>		</pre></div>             </td>           </tr>                               <tr id="section-28">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-28">&#182;</a>               </div>               <p>======================================================================</p>

<h2>Properties</h2>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="kd">private</span> <span class="k">var</span> <span class="nx">_emitCode</span><span class="o">:</span><span class="nb">uint</span><span class="o">;</span>
        <span class="kd">private</span> <span class="k">var</span> <span class="nx">_flags</span><span class="o">:</span><span class="nb">uint</span><span class="o">;</span>
        <span class="kd">private</span> <span class="k">var</span> <span class="nx">_name</span><span class="o">:</span><span class="nb">String</span><span class="o">;</span>
        <span class="kd">private</span> <span class="k">var</span> <span class="nx">_numRegister</span><span class="o">:</span><span class="nb">uint</span><span class="o">;</span>
        </pre></div>             </td>           </tr>                               <tr id="section-29">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-29">&#182;</a>               </div>               <p>======================================================================</p>

<h2>Getters</h2>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="kd">public</span> <span class="kd">function</span> <span class="kd">get</span> <span class="nx">emitCode</span><span class="p">()</span><span class="o">:</span><span class="nb">uint</span>		<span class="p">{</span> <span class="k">return</span> <span class="nx">_emitCode</span><span class="o">;</span> <span class="p">}</span>
        <span class="kd">public</span> <span class="kd">function</span> <span class="kd">get</span> <span class="nx">flags</span><span class="p">()</span><span class="o">:</span><span class="nb">uint</span>		<span class="p">{</span> <span class="k">return</span> <span class="nx">_flags</span><span class="o">;</span> <span class="p">}</span>
        <span class="kd">public</span> <span class="kd">function</span> <span class="kd">get</span> <span class="nx">name</span><span class="p">()</span><span class="o">:</span><span class="nb">String</span>		<span class="p">{</span> <span class="k">return</span> <span class="nx">_name</span><span class="o">;</span> <span class="p">}</span>
        <span class="kd">public</span> <span class="kd">function</span> <span class="kd">get</span> <span class="nx">numRegister</span><span class="p">()</span><span class="o">:</span><span class="nb">uint</span>	<span class="p">{</span> <span class="k">return</span> <span class="nx">_numRegister</span><span class="o">;</span> <span class="p">}</span>
        </pre></div>             </td>           </tr>                               <tr id="section-30">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-30">&#182;</a>               </div>               <p>======================================================================</p>

<h2>Constructor</h2>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="kd">public</span> <span class="kd">function</span> <span class="nx">OpCode</span><span class="p">(</span> <span class="nx">name</span><span class="o">:</span><span class="nb">String</span><span class="o">,</span> <span class="nx">numRegister</span><span class="o">:</span><span class="nb">uint</span><span class="o">,</span> <span class="nx">emitCode</span><span class="o">:</span><span class="nb">uint</span><span class="o">,</span> <span class="nx">flags</span><span class="o">:</span><span class="nb">uint</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="nx">_name</span> <span class="o">=</span> <span class="nx">name</span><span class="o">;</span>
            <span class="nx">_numRegister</span> <span class="o">=</span> <span class="nx">numRegister</span><span class="o">;</span>
            <span class="nx">_emitCode</span> <span class="o">=</span> <span class="nx">emitCode</span><span class="o">;</span>
            <span class="nx">_flags</span> <span class="o">=</span> <span class="nx">flags</span><span class="o">;</span>
        <span class="p">}</span>		
        </pre></div>             </td>           </tr>                               <tr id="section-31">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-31">&#182;</a>               </div>               <p>======================================================================</p>

<h2>Methods</h2>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="kd">public</span> <span class="kd">function</span> <span class="nx">toString</span><span class="p">()</span><span class="o">:</span><span class="nb">String</span>
        <span class="p">{</span>
            <span class="k">return</span> <span class="s2">&quot;[OpCode name=\&quot;&quot;</span><span class="o">+</span><span class="nx">_name</span><span class="o">+</span><span class="s2">&quot;\&quot;, numRegister=&quot;</span><span class="o">+</span><span class="nx">_numRegister</span><span class="o">+</span><span class="s2">&quot;, emitCode=&quot;</span><span class="o">+</span><span class="nx">_emitCode</span><span class="o">+</span><span class="s2">&quot;, flags=&quot;</span><span class="o">+</span><span class="nx">_flags</span><span class="o">+</span><span class="s2">&quot;]&quot;</span><span class="o">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
    </pre></div>             </td>           </tr>                               <tr id="section-32">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-32">&#182;</a>               </div>               <p>===========================================================================</p>

<h2>Class</h2>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="kd">class</span> <span class="nx">Register</span>
    <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-33">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-33">&#182;</a>               </div>               <p>======================================================================</p>

<h2>Properties</h2>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="kd">private</span> <span class="k">var</span> <span class="nx">_emitCode</span><span class="o">:</span><span class="nb">uint</span><span class="o">;</span>
        <span class="kd">private</span> <span class="k">var</span> <span class="nx">_name</span><span class="o">:</span><span class="nb">String</span><span class="o">;</span>
        <span class="kd">private</span> <span class="k">var</span> <span class="nx">_longName</span><span class="o">:</span><span class="nb">String</span><span class="o">;</span>
        <span class="kd">private</span> <span class="k">var</span> <span class="nx">_flags</span><span class="o">:</span><span class="nb">uint</span><span class="o">;</span>
        <span class="kd">private</span> <span class="k">var</span> <span class="nx">_range</span><span class="o">:</span><span class="nb">uint</span><span class="o">;</span>
        </pre></div>             </td>           </tr>                               <tr id="section-34">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-34">&#182;</a>               </div>               <p>======================================================================</p>

<h2>Getters</h2>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="kd">public</span> <span class="kd">function</span> <span class="kd">get</span> <span class="nx">emitCode</span><span class="p">()</span><span class="o">:</span><span class="nb">uint</span>		<span class="p">{</span> <span class="k">return</span> <span class="nx">_emitCode</span><span class="o">;</span> <span class="p">}</span>
        <span class="kd">public</span> <span class="kd">function</span> <span class="kd">get</span> <span class="nx">longName</span><span class="p">()</span><span class="o">:</span><span class="nb">String</span>	<span class="p">{</span> <span class="k">return</span> <span class="nx">_longName</span><span class="o">;</span> <span class="p">}</span>
        <span class="kd">public</span> <span class="kd">function</span> <span class="kd">get</span> <span class="nx">name</span><span class="p">()</span><span class="o">:</span><span class="nb">String</span>		<span class="p">{</span> <span class="k">return</span> <span class="nx">_name</span><span class="o">;</span> <span class="p">}</span>
        <span class="kd">public</span> <span class="kd">function</span> <span class="kd">get</span> <span class="nx">flags</span><span class="p">()</span><span class="o">:</span><span class="nb">uint</span>		<span class="p">{</span> <span class="k">return</span> <span class="nx">_flags</span><span class="o">;</span> <span class="p">}</span>
        <span class="kd">public</span> <span class="kd">function</span> <span class="kd">get</span> <span class="nx">range</span><span class="p">()</span><span class="o">:</span><span class="nb">uint</span>		<span class="p">{</span> <span class="k">return</span> <span class="nx">_range</span><span class="o">;</span> <span class="p">}</span>
        </pre></div>             </td>           </tr>                               <tr id="section-35">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-35">&#182;</a>               </div>               <p>======================================================================</p>

<h2>Constructor</h2>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="kd">public</span> <span class="kd">function</span> <span class="nx">Register</span><span class="p">(</span> <span class="nx">name</span><span class="o">:</span><span class="nb">String</span><span class="o">,</span> <span class="nx">longName</span><span class="o">:</span><span class="nb">String</span><span class="o">,</span> <span class="nx">emitCode</span><span class="o">:</span><span class="nb">uint</span><span class="o">,</span> <span class="nx">range</span><span class="o">:</span><span class="nb">uint</span><span class="o">,</span> <span class="nx">flags</span><span class="o">:</span><span class="nb">uint</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="nx">_name</span> <span class="o">=</span> <span class="nx">name</span><span class="o">;</span>
            <span class="nx">_longName</span> <span class="o">=</span> <span class="nx">longName</span><span class="o">;</span>
            <span class="nx">_emitCode</span> <span class="o">=</span> <span class="nx">emitCode</span><span class="o">;</span>
            <span class="nx">_range</span> <span class="o">=</span> <span class="nx">range</span><span class="o">;</span>
            <span class="nx">_flags</span> <span class="o">=</span> <span class="nx">flags</span><span class="o">;</span>
        <span class="p">}</span>
        </pre></div>             </td>           </tr>                               <tr id="section-36">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-36">&#182;</a>               </div>               <p>======================================================================</p>

<h2>Methods</h2>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="kd">public</span> <span class="kd">function</span> <span class="nx">toString</span><span class="p">()</span><span class="o">:</span><span class="nb">String</span>
        <span class="p">{</span>
            <span class="k">return</span> <span class="s2">&quot;[Register name=\&quot;&quot;</span><span class="o">+</span><span class="nx">_name</span><span class="o">+</span><span class="s2">&quot;\&quot;, longName=\&quot;&quot;</span><span class="o">+</span><span class="nx">_longName</span><span class="o">+</span><span class="s2">&quot;\&quot;, emitCode=&quot;</span><span class="o">+</span><span class="nx">_emitCode</span><span class="o">+</span><span class="s2">&quot;, range=&quot;</span><span class="o">+</span><span class="nx">_range</span><span class="o">+</span><span class="s2">&quot;, flags=&quot;</span><span class="o">+</span> <span class="nx">_flags</span><span class="o">+</span><span class="s2">&quot;]&quot;</span><span class="o">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
    </pre></div>             </td>           </tr>                               <tr id="section-37">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-37">&#182;</a>               </div>               <p>===========================================================================</p>

<h2>Class</h2>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="kd">class</span> <span class="nx">Sampler</span>
    <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-38">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-38">&#182;</a>               </div>               <p>======================================================================</p>

<h2>Properties</h2>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="kd">private</span> <span class="k">var</span> <span class="nx">_flag</span><span class="o">:</span><span class="nb">uint</span><span class="o">;</span>
        <span class="kd">private</span> <span class="k">var</span> <span class="nx">_mask</span><span class="o">:</span><span class="nb">uint</span><span class="o">;</span>
        <span class="kd">private</span> <span class="k">var</span> <span class="nx">_name</span><span class="o">:</span><span class="nb">String</span><span class="o">;</span>
        </pre></div>             </td>           </tr>                               <tr id="section-39">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-39">&#182;</a>               </div>               <p>======================================================================</p>

<h2>Getters</h2>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="kd">public</span> <span class="kd">function</span> <span class="kd">get</span> <span class="nx">flag</span><span class="p">()</span><span class="o">:</span><span class="nb">uint</span>		<span class="p">{</span> <span class="k">return</span> <span class="nx">_flag</span><span class="o">;</span> <span class="p">}</span>
        <span class="kd">public</span> <span class="kd">function</span> <span class="kd">get</span> <span class="nx">mask</span><span class="p">()</span><span class="o">:</span><span class="nb">uint</span>		<span class="p">{</span> <span class="k">return</span> <span class="nx">_mask</span><span class="o">;</span> <span class="p">}</span>
        <span class="kd">public</span> <span class="kd">function</span> <span class="kd">get</span> <span class="nx">name</span><span class="p">()</span><span class="o">:</span><span class="nb">String</span>	<span class="p">{</span> <span class="k">return</span> <span class="nx">_name</span><span class="o">;</span> <span class="p">}</span>
        </pre></div>             </td>           </tr>                               <tr id="section-40">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-40">&#182;</a>               </div>               <p>======================================================================</p>

<h2>Constructor</h2>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="kd">public</span> <span class="kd">function</span> <span class="nx">Sampler</span><span class="p">(</span> <span class="nx">name</span><span class="o">:</span><span class="nb">String</span><span class="o">,</span> <span class="nx">flag</span><span class="o">:</span><span class="nb">uint</span><span class="o">,</span> <span class="nx">mask</span><span class="o">:</span><span class="nb">uint</span> <span class="p">)</span>
        <span class="p">{</span>
            <span class="nx">_name</span> <span class="o">=</span> <span class="nx">name</span><span class="o">;</span>
            <span class="nx">_flag</span> <span class="o">=</span> <span class="nx">flag</span><span class="o">;</span>
            <span class="nx">_mask</span> <span class="o">=</span> <span class="nx">mask</span><span class="o">;</span>
        <span class="p">}</span>
        </pre></div>             </td>           </tr>                               <tr id="section-41">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-41">&#182;</a>               </div>               <p>======================================================================</p>

<h2>Methods</h2>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="kd">public</span> <span class="kd">function</span> <span class="nx">toString</span><span class="p">()</span><span class="o">:</span><span class="nb">String</span>
        <span class="p">{</span>
            <span class="k">return</span> <span class="s2">&quot;[Sampler name=\&quot;&quot;</span><span class="o">+</span><span class="nx">_name</span><span class="o">+</span><span class="s2">&quot;\&quot;, flag=\&quot;&quot;</span><span class="o">+</span><span class="nx">_flag</span><span class="o">+</span><span class="s2">&quot;\&quot;, mask=&quot;</span><span class="o">+</span><span class="nx">mask</span><span class="o">+</span><span class="s2">&quot;]&quot;</span><span class="o">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

</pre></div>             </td>           </tr>                </tbody>     </table>   </div> </body> </html> 