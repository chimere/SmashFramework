<!DOCTYPE html>  <html> <head>   <title>BindingDemoScene.as</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">        <div id="jump_to">         Jump To &hellip;         <div id="jump_wrapper">           <div id="jump_page">                   <b> 1. First Steps </b>                          <a class="source" href="PBEDemos.html">       PBEDemos.as      </a>                          <a class="source" href="SimplestRendererScene.html">       SimplestRendererScene.as      </a>                          <a class="source" href="SimplestSpriteRenderer.html">       SimplestSpriteRenderer.as      </a>                          <a class="source" href="BindingDemoScene.html">       BindingDemoScene.as      </a>                          <a class="source" href="SimplestSpatialComponent.html">       SimplestSpatialComponent.as      </a>                          <a class="source" href="MouseFollowerScene.html">       MouseFollowerScene.as      </a>                          <a class="source" href="SimplestMouseFollowComponent.html">       SimplestMouseFollowComponent.as      </a>                          <a class="source" href="CirclePickupScene.html">       CirclePickupScene.as      </a>                          <a class="source" href="GemManager.html">       GemManager.as      </a>                          <b> 2. Building Gameplay </b>                          <a class="source" href="CirclePickupWithTimeManagerScene.html">       CirclePickupWithTimeManagerScene.as      </a>                          <a class="source" href="OneButtonDemoScene.html">       OneButtonDemoScene.as      </a>                          <a class="source" href="OneButtonWithTweenDemoScene.html">       OneButtonWithTweenDemoScene.as      </a>                          <a class="source" href="TwoButtonDemoScene.html">       TwoButtonDemoScene.as      </a>                          <a class="source" href="CarDemoScene.html">       CarDemoScene.as      </a>                          <a class="source" href="FSMDemoScene.html">       FSMDemoScene.as      </a>                               </div>         </div>       </div>      <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs" colspan="2">             <h1>               BindingDemoScene.as             </h1>           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>               <p>Bulding off of SimplestRendererScene.as, this demo demonstrates the PBE
data binding system.</p>

<p>It's often necessary to get data from one component to another in a dynamic
way. It's easy enough to hand-write code to copy values around, but it can
be error-prone and hard to maintain. It's also not data driven.</p>

<p>This demo will show how to use the binding system built into PBComponent to
shuffle data around, specifically, to position the renderer based on a value
stored in a spatial component.</p>

<p>This demo uses <a href="SimplestSpatialComponent.html">SimplestSpatialComponent</a> 
in addition to the classes used in the previous demo.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="kd">package</span> <span class="nx">demos</span><span class="p">.</span><span class="nx">demo_02_bindingDemo</span>
<span class="p">{</span>
    <span class="kd">import</span> <span class="nx">com</span><span class="p">.</span><span class="nx">pblabs</span><span class="p">.</span><span class="nx">core</span><span class="p">.</span><span class="nx">PBGroup</span><span class="o">;</span>
    <span class="kd">import</span> <span class="nx">com</span><span class="p">.</span><span class="nx">pblabs</span><span class="p">.</span><span class="nx">simplest</span><span class="p">.</span><span class="nx">SimplestMouseFollowComponent</span><span class="o">;</span>
    <span class="kd">import</span> <span class="nx">com</span><span class="p">.</span><span class="nx">pblabs</span><span class="p">.</span><span class="nx">simplest</span><span class="p">.</span><span class="nx">SimplestSpatialComponent</span><span class="o">;</span>
    <span class="kd">import</span> <span class="nx">com</span><span class="p">.</span><span class="nx">pblabs</span><span class="p">.</span><span class="nx">simplest</span><span class="p">.</span><span class="nx">SimplestSpriteRenderer</span><span class="o">;</span>
    <span class="kd">import</span> <span class="nx">demos</span><span class="p">.</span><span class="nx">SimplestDemoGameObject</span><span class="o">;</span>
    
    <span class="kd">public</span> <span class="kd">class</span> <span class="nx">BindingDemoScene</span> <span class="kd">extends</span> <span class="nx">PBGroup</span>
    <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-2">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-2">&#182;</a>               </div>               <h2>Demo Implementation</h2>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="kd">public</span> <span class="kd">override</span> <span class="kd">function</span> <span class="nx">initialize</span><span class="p">()</span><span class="o">:</span><span class="nx">void</span>
        <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-3">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-3">&#182;</a>               </div>               <p>Always let the superclass initialize! Otherwise you will have
a broken game.</p>             </td>             <td class="code">               <div class="highlight"><pre>            <span class="kd">super</span><span class="p">.</span><span class="nx">initialize</span><span class="p">();</span>
            </pre></div>             </td>           </tr>                               <tr id="section-4">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-4">&#182;</a>               </div>               <p>Allocate the game object for this demo.</p>             </td>             <td class="code">               <div class="highlight"><pre>            <span class="k">var</span> <span class="nx">go</span><span class="o">:</span><span class="nx">SimplestDemoGameObject</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">SimplestDemoGameObject</span><span class="p">();</span>
            <span class="nx">go</span><span class="p">.</span><span class="nx">owningGroup</span> <span class="o">=</span> <span class="k">this</span><span class="o">;</span>
            </pre></div>             </td>           </tr>                               <tr id="section-5">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-5">&#182;</a>               </div>               <p>Set up the spatial component. See <a href="SimplestSpatialComponent.html">SimplestSpatialComponent</a> 
for more information; basically this exists just to store a
position value.</p>             </td>             <td class="code">               <div class="highlight"><pre>            <span class="nx">go</span><span class="p">.</span><span class="nx">spatial</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">SimplestSpatialComponent</span><span class="p">();</span>
            <span class="nx">go</span><span class="p">.</span><span class="nx">spatial</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="mi">100</span><span class="o">;</span>
            <span class="nx">go</span><span class="p">.</span><span class="nx">spatial</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="mi">100</span><span class="o">;</span>
            </pre></div>             </td>           </tr>                               <tr id="section-6">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-6">&#182;</a>               </div>               <p>Set up the renderer, and...</p>             </td>             <td class="code">               <div class="highlight"><pre>            <span class="nx">go</span><span class="p">.</span><span class="nx">render</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">SimplestSpriteRenderer</span><span class="p">();</span>
            </pre></div>             </td>           </tr>                               <tr id="section-7">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-7">&#182;</a>               </div>               <p>...use component data binding to map the position field on the renderer
to the position field on the spatial component. Now, every time
applyBindings() is called, the value on the spatial will be copied
over. If you look in SimplestSpriteRenderer, you'll see this is
done every frame.</p>

<p>The weird @ syntax is actually really simple. @ tells the 
binding system that you are going to reference a component on
the same PBGameObject as the PBComponent the binding is on. Then
you tell it the component to look up by name, and the field on
that component to look up. In other words, "find the spatial 
component, get the value of its position field, then assign that
value to my position field."</p>             </td>             <td class="code">               <div class="highlight"><pre>            <span class="nx">go</span><span class="p">.</span><span class="nx">render</span><span class="p">.</span><span class="nx">addBinding</span><span class="p">(</span><span class="s2">&quot;position&quot;</span><span class="o">,</span> <span class="s2">&quot;@spatial.position&quot;</span><span class="p">);</span>
            </pre></div>             </td>           </tr>                               <tr id="section-8">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-8">&#182;</a>               </div>               <p>And tell the SimplestDemoGameObject it's good to go!</p>             </td>             <td class="code">               <div class="highlight"><pre>            <span class="nx">go</span><span class="p">.</span><span class="nx">initialize</span><span class="p">();</span>
            </pre></div>             </td>           </tr>                               <tr id="section-9">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-9">&#182;</a>               </div>               <p>Now you will see the renderer's circle appearing at the location
specified on the spatial.</p>

<p>Let's go to MouseFollowerScene next to see this in action!</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="c1">// @docco-chapter 1. First Steps</span>
<span class="c1">// @docco-order 4</span>

</pre></div>             </td>           </tr>                </tbody>     </table>   </div> </body> </html> 